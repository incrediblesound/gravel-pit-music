{"version":3,"sources":["webpack:///webpack/bootstrap eaef509f67d4df084816","webpack:///./src/constants.js","webpack:///./src/classes.js","webpack:///./src/note.js","webpack:///./src/state.js","webpack:///./src/switch.js","webpack:///./src/instruments/fm.js","webpack:///./src/instruments/hat.js","webpack:///./src/instruments/kick.js","webpack:///./src/instruments/leadSynth.js","webpack:///./src/instruments/snare.js","webpack:///./src/instruments/synth.js","webpack:///./src/main.js"],"names":["COLOR","LOOP_LENGTH","Background","ctx","x","y","context","fillStyle","fillRect","clearRect","PlayBtn","state","on","isPlaying","togglePlay","render","BeatMarker","Blinker","i","blinkers","beginPath","arc","Math","PI","fill","lineWidth","strokeStyle","stroke","Word","word","handleClick","fillText","PageButton","pageOne","value","callBack","buttonIdx","setPage","offset","name","Options","options","idx","length","Note","type","notes","noteIndex","steps","page","note","makeStepArray","empty","undefined","arr","map","step","hold","State","audioCtx","blocks","moduleMap","key","kick","snare","leadSynth","fmSynth","hat","copyBuffer","instruments","refreshScreen","values","noteTime","startTime","currentTime","rhythmIndex","previousRhythmIndex","schedule","stop","Object","keys","forEach","stepKey","slice","assign","contextPlayTime","toggle","play","advanceNote","interval","setTimeout","tempo","secondsPerBeat","stopAll","window","clearInterval","k","module","setPos","BinSwitch","colors","toggleStep","OctaveSwitch","innerX","innerY","isHold","decay","prevOsc","oscillators","playing","config","data","osc1","gainNode1","gain","setTargetAtTime","gainNode2","osc2","modulator1","modulator2","oct","wave","modulator","createOscillator","modulatorGain","createGain","frequency","connect","pan","osc","gainNode","panNode","createStereoPanner","filter","createBiquadFilter","destination","getOscillator","filter1","filter2","getModulator","modulatorGain1","modulatorGain2","setupOscillators","storeOscillators","start","detune","Hat","buffer","noiseBuffer","noise","createBufferSource","noiseFilter","noiseEnvelope","time","getNoise","bufferSize","sampleRate","createBuffer","output","getChannelData","random","KickSynth","blipGain","blipOsc","getOscillators","LeadSynth","previousTone","previousOct","prevGainNode","Snare","KeySynth","filterValue","osc3","waveform","makeOscillator","filters","g","canvas","document","getElementById","getContext","font","AudioContext","webkitAudioContext","updateKickDecay","setDecay","bind","updateLeadDecay","updateBassFilter","setFilter","updateLeadWave","setWave","pageButton","copyPage","pastePage","onclick","e","totalOffsetX","totalOffsetY","canvasX","canvasY","currentElement","offsetLeft","scrollLeft","offsetTop","scrollTop","offsetParent","pageX","scrollX","pageY","scrollY","floor","onkeydown","code","initScreen"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap eaef509f67d4df084816","export const COLOR = 'white'\nexport const LOOP_LENGTH = 16\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants.js","import { COLOR } from './constants'\n\nexport class Background {\n  constructor(ctx, x, y){\n    this.context = ctx\n    this.x = x\n    this.y = y\n  }\n  render(){\n    this.context.fillStyle = 'black'\n    this.context.fillRect(this.x, this.y, 40, 40)\n    this.context.clearRect(this.x, this.y, 39, 39)\n  }\n  handleClick(){}\n}\n\nexport class PlayBtn {\n  constructor(ctx, state, x, y){\n    this.context = ctx\n    this.state = state\n    this.x = x\n    this.y = y\n    this.on = state.isPlaying\n  }\n  render(){\n    this.context.fillStyle = this.on ? 'green' : 'yellow'\n    this.context.fillRect(this.x, this.y, 40, 40)\n  }\n  handleClick(){\n    this.state.togglePlay()\n    this.on = this.state.isPlaying\n    this.render()\n  }\n}\n\nexport class BeatMarker {\n  constructor(ctx, x, y){\n    this.context = ctx\n    this.x = x\n    this.y = y\n  }\n  render(){\n    this.context.fillStyle = 'red'\n    this.context.fillRect(this.x, this.y, 40, 40)\n    this.context.clearRect(this.x, this.y, 30, 30)\n  }\n  handleClick(){}\n}\n\nexport class Blinker {\n  constructor(i, state, ctx){\n    this.context = ctx\n    state.blinkers[i] = this\n  }\n  render(){\n    if(this.on){\n      this.context.beginPath();\n      this.context.arc(this.x+20, this.y+20, 8, 0, 2 * Math.PI, false);\n      this.context.fillStyle = 'red';\n      this.context.fill();\n      this.context.lineWidth = 1;\n      this.context.strokeStyle = '#003300';\n      this.context.stroke();\n    } else {\n      this.context.clearRect(this.x, this.y, 40, 40)\n    }\n  }\n  setPos(x, y){\n    this.x = x\n    this.y = y\n  }\n  handleClick(){}\n  toggle(){\n    this.on = !this.on\n    this.render()\n  }\n}\n\nexport class Word {\n  constructor(word, ctx, x, y, handleClick){\n    this.context = ctx\n    this.word = word\n    this.x = x\n    this.y = y\n    this.handleClick = handleClick || function(){}\n  }\n  render(){\n    this.context.clearRect(this.x, this.y, 40, 40)\n    this.context.fillStyle = 'green'\n    this.context.fillText(this.word, this.x+3, this.y+25, 80);\n  }\n}\n\nexport class PageButton {\n  constructor(state, ctx, x, y, handleClick){\n    this.context = ctx\n    this.state = state\n    this.pageOne = x/40\n    this.x = x\n    this.y = y\n    this.value = 0\n    this.callBack = handleClick\n  }\n  handleClick(x, y){\n    const buttonIdx = x - this.pageOne\n    this.value = buttonIdx\n    this.state.setPage(this.value)\n    this.render()\n  }\n  render(){\n    this.context.clearRect(this.x, this.y, 40, 160)\n    this.context.fillStyle = 'black'\n    for(let i = 0; i < 4; i++){\n      const offset = 40 * i\n      const name = `Pg ${i+1}`\n      this.context.fillRect(this.x+offset, this.y, 40, 40)\n      if(i === this.value){\n        this.context.fillStyle = '#999'\n        this.context.fillRect(this.x+offset, this.y, 39, 39)\n      } else {\n        this.context.clearRect(this.x+offset, this.y, 39, 39)\n      }\n      this.context.fillStyle = 'black'\n      this.context.fillText(name, this.x+offset+3, this.y+25, 80);\n    }\n  }\n}\n\nexport class Options {\n  constructor(options, callBack, ctx, x, y){\n    this.context = ctx\n    this.idx = 0\n    this.options = options\n    this.callBack = callBack\n    this.x = x\n    this.y = y\n  }\n  render(){\n    this.context.fillStyle = 'black'\n    this.context.clearRect(this.x, this.y, 40, 40)\n    this.context.fillText(this.options[this.idx], this.x+3, this.y+25, 39);\n  }\n  handleClick(){\n    this.idx = (this.idx+1) % this.options.length\n    this.render()\n    this.callBack(this.options[this.idx])\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/classes.js","export default class Note {\n  constructor(idx, type, state, context){\n    this.type = type\n    this.notes = ['c','c#','d','d#','e','f','f#','g','g#','a','a#','b'],\n    this.state = state\n    this.context = context\n    this.idx = idx\n  }\n  setPos(x, y){\n    this.x = x\n    this.y = y\n  }\n  render(){\n    this.context.fillStyle = 'black'\n    this.context.fillRect(this.x, this.y, 40, 40)\n    this.context.clearRect(this.x+1, this.y+1, 38, 38)\n    const noteIndex = this.state.steps[this.type][this.state.page][this.idx].note\n    this.context.fillText(this.notes[noteIndex], this.x+15, this.y+25, 15);\n  }\n  handleClick(){\n    const page = this.state.steps[this.type][this.state.page]\n    page[this.idx].note = page[this.idx].note === 11 ? 0 : page[this.idx].note+1\n    this.render()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/note.js","import KeySynth from './instruments/synth'\nimport KickSynth from './instruments/kick'\nimport LeadSynth from './instruments/leadSynth'\nimport fmSynth from './instruments/fm'\nimport Snare from './instruments/snare'\nimport Hat from './instruments/hat'\nimport { LOOP_LENGTH } from './constants'\n\nfunction makeStepArray(steps){\n  let empty = []\n  empty.length = steps\n  empty.fill(undefined)\n  let arr = empty.map(item => ({ step: 0, note: 0, hold: false }))\n  return arr\n}\n\nexport default class State {\n  constructor(audioCtx) {\n    this.isPlaying = false\n    this.page = 0\n    this.blocks = {}\n    this.moduleMap = {}\n    this.steps = {\n      key: [makeStepArray(16),makeStepArray(16), makeStepArray(16), makeStepArray(16)],\n      kick: [makeStepArray(16),makeStepArray(16), makeStepArray(16), makeStepArray(16)],\n      snare: [makeStepArray(16),makeStepArray(16), makeStepArray(16), makeStepArray(16)],\n      leadSynth: [makeStepArray(16),makeStepArray(16), makeStepArray(16), makeStepArray(16)],\n      fmSynth: [makeStepArray(16),makeStepArray(16), makeStepArray(16), makeStepArray(16)],\n      hat: [makeStepArray(16),makeStepArray(16), makeStepArray(16), makeStepArray(16)]\n    }\n    this.copyBuffer = { notes: {}, steps: {} }\n    this.blinkers = []\n    this.step = 0\n    this.context = audioCtx\n    this.instruments = {\n      key: new KeySynth(audioCtx),\n      kick: new KickSynth(audioCtx),\n      snare: new Snare(audioCtx),\n      fmSynth: new fmSynth(audioCtx),\n      leadSynth: new LeadSynth(audioCtx),\n      hat: new Hat(audioCtx)\n    }\n  }\n  setPage(value){\n    this.page = value\n    this.refreshScreen()\n    return value\n  }\n  toggleStep(idx, type, values){\n    this.steps[type][this.page][idx].step = (this.steps[type][this.page][idx].step + 1) % values\n  }\n  togglePlay(){\n    this.isPlaying = !this.isPlaying\n\n    if(this.isPlaying){\n      this.noteTime = 0.0\n      this.startTime = this.context.currentTime + 0.005\n      this.rhythmIndex = 0\n      this.previousRhythmIndex = null\n      this.schedule()\n    } else {\n      this.stop()\n    }\n  }\n  copyPage(){\n    Object.keys(this.steps).forEach(stepKey => {\n      this.copyBuffer.steps[stepKey] = this.steps[stepKey][this.page].slice().map(step => Object.assign({}, step))\n    })\n  }\n  pastePage(){\n    Object.keys(this.steps).forEach(stepKey => {\n      this.steps[stepKey][this.page] = this.copyBuffer.steps[stepKey].slice()\n    })\n    this.refreshScreen()\n  }\n  schedule(){\n    let currentTime = this.context.currentTime\n    // The sequence starts at startTime, so normalize currentTime so that it's 0 at the start of the sequence.\n    currentTime -= this.startTime\n\n    while (this.noteTime < currentTime + 0.200) {\n      var contextPlayTime = this.noteTime + this.startTime\n      this.blinkers[this.rhythmIndex].toggle()\n      if(this.previousRhythmIndex !== null) this.blinkers[this.previousRhythmIndex].toggle()\n      Object.keys(this.steps).forEach(type => {\n        this.instruments[type].play(this.steps[type][this.page][this.rhythmIndex])\n      })\n      this.advanceNote()\n    }\n    this.interval = setTimeout(() => { this.schedule() }, 0)\n  }\n  advanceNote(){\n    // Setting tempo to 60 BPM just for now\n    let tempo = 90\n    let secondsPerBeat = 60 / tempo\n    this.previousRhythmIndex = this.rhythmIndex\n    this.rhythmIndex++;\n    if (this.rhythmIndex === LOOP_LENGTH) {\n      this.rhythmIndex = 0;\n    }\n\n    //0.25 because each square is a 16th note\n    this.noteTime += 0.25 * secondsPerBeat;\n  }\n  stop(){\n    Object.keys(this.instruments).forEach(key => {\n      this.instruments[key].stopAll()\n    })\n    this.blinkers[this.previousRhythmIndex].toggle()\n    window.clearInterval(this.interval)\n  }\n  initScreen(){\n    for(var i = 0; i < 1020; i += 40){\n      for(var k = 0; k < 680; k += 40){\n        const key = `${i/40}/${k/40}`\n        const module = this.moduleMap[key]\n        if(module){\n          module.setPos(i, k)\n          this.blocks[key] = module\n        }\n        if(this.blocks[key]) this.blocks[key].render()\n      }\n    }\n  }\n  refreshScreen(){\n    for(var i = 0; i < 1020; i += 40){\n      for(var k = 0; k < 680; k += 40){\n        const key = `${i/40}/${k/40}`\n        if(this.blocks[key]) this.blocks[key].render()\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/state.js","import { COLOR } from './constants'\n\nexport class BinSwitch {\n  constructor(idx, type, state, ctx){\n    this.idx = idx\n    this.type = type\n    this.state = state\n    this.context = ctx\n    this.x = null\n    this.y = null\n    this.colors = ['black', 'red']\n  }\n  render(){\n    const page = this.state.steps[this.type][this.state.page]\n    this.context.fillStyle = this.colors[page[this.idx].step]\n    this.context.fillRect(this.x, this.y, 39, 39)\n    this.context.fillStyle = COLOR\n  }\n  setPos(x, y){\n    this.x = x\n    this.y = y\n  }\n  handleClick(){\n    const page = this.state.steps[this.type][this.state.page]\n    this.value = (this.value+1) % 2\n    this.state.toggleStep(this.idx, this.type, 2)\n    this.context.clearRect(this.x, this.y, 39, 39)\n    this.context.fillStyle = this.colors[page[this.idx].step]\n    this.context.fillRect(this.x, this.y, 39, 39)\n    this.context.fillStyle = COLOR\n  }\n}\n\nexport class OctaveSwitch {\n  constructor(idx, type, state, ctx){\n    this.idx = idx\n    this.type = type\n    this.state = state\n    this.context = ctx\n    this.x = null\n    this.y = null\n    this.colors = ['black', 'red', 'blue']\n  }\n  render(){\n    const page = this.state.steps[this.type][this.state.page]\n    this.context.fillStyle = this.colors[page[this.idx].step]\n    this.context.fillRect(this.x, this.y, 39, 39)\n    this.context.fillStyle = page[this.idx].hold ? 'green' : 'yellow'\n    this.context.fillRect(this.x, this.y, 10, 10)\n    this.context.fillStyle = COLOR\n  }\n  setPos(x, y){\n    this.x = x\n    this.y = y\n  }\n  handleClick(x, y, innerX, innerY){\n    const isHold = innerX <= 10 && innerY <= 10\n    const page = this.state.steps[this.type][this.state.page]\n    if(isHold){\n      page[this.idx].hold = !page[this.idx].hold\n    } else {\n      this.value = (page[this.idx].step+1) % 3\n      this.state.toggleStep(this.idx, this.type, 3)\n    }\n    this.context.clearRect(this.x, this.y, 39, 39)\n    this.render()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/switch.js","export default class fmSynth {\n  constructor(ctx){\n    this.context = ctx\n    this.decay = 0\n    this.prevOsc = null\n    this.oscillators = {}\n    this.playing = false\n    this.config = {\n      type: 'square'\n    }\n  }\n  newOsc(){\n    return\n  }\n  setDecay(value){\n    this.decay = value\n  }\n  setWave(value){\n    this.config.type = value\n  }\n  storeOscillators(data){\n    Object.keys(data).forEach(key => {\n      this.oscillators[key] = data[key]\n    })\n  }\n  stopAll(){\n    if(!this.oscillators.osc1) return\n    this.oscillators.gainNode1.gain.setTargetAtTime(0, this.context.currentTime+(this.decay*0.02), 0.05);\n    this.oscillators.gainNode2.gain.setTargetAtTime(0, this.context.currentTime+(this.decay*0.02), 0.05);\n    this.oscillators.osc1.stop(this.context.currentTime+1)\n    this.oscillators.osc2.stop(this.context.currentTime+1)\n    this.oscillators.modulator1.stop(this.context.currentTime+1)\n    this.oscillators.modulator2.stop(this.context.currentTime+1)\n    this.oscillators = {}\n    this.playing = false\n  }\n  getModulator(oct, wave, gain){\n    const modulator = this.context.createOscillator()\n    const modulatorGain = this.context.createGain()\n    modulator.type = wave\n    modulator.frequency.value = oct\n    modulatorGain.gain.value = gain\n    modulator.connect(modulatorGain)\n    return [ modulator, modulatorGain ]\n  }\n  getOscillator(pan){\n    const osc = this.context.createOscillator()\n    osc.type = this.config.type\n\n    const gainNode = this.context.createGain()\n    gainNode.gain.value = 0.08\n\n    const panNode = this.context.createStereoPanner()\n    panNode.pan.value = pan === 'left' ? -0.7 : 0.7\n\n    const filter = this.context.createBiquadFilter();\n    filter.type = 'lowpass';\n    filter.frequency.value = 0;\n\n    osc.connect(filter)\n    filter.connect(gainNode)\n    gainNode.connect(panNode)\n    panNode.connect(this.context.destination)\n    return [ osc, filter, gainNode ]\n  }\n  setupOscillators(){\n    const [ osc1, filter1, gainNode1 ] = this.getOscillator('left')\n    const [ osc2, filter2, gainNode2 ] = this.getOscillator('right')\n    const [ modulator1, modulatorGain1 ] = this.getModulator(110, 'sawtooth', 40)\n    const [ modulator2, modulatorGain2 ] = this.getModulator(220, 'square', 35)\n    modulatorGain1.connect(osc1.frequency)\n    modulatorGain2.connect(osc2.frequency)\n    return [\n      osc1, osc2,\n      gainNode1, gainNode2,\n      modulator1, modulator2,\n      filter1, filter2\n     ]\n  }\n  play({ step, note, hold }){\n    if(step && !hold){\n      this.stopAll()\n      const [\n        osc1, osc2,\n        gainNode1, gainNode2,\n        modulator1, modulator2,\n        filter1, filter2\n      ] = this.setupOscillators(note, step)\n      this.storeOscillators({\n        osc1, osc2,\n        modulator1, modulator2,\n        gainNode1, gainNode2\n      })\n      modulator1.start()\n      modulator2.start()\n      osc1.start()\n      osc2.start()\n      filter1.frequency.setTargetAtTime(5000, this.context.currentTime, 0.03)\n      filter2.frequency.setTargetAtTime(5000, this.context.currentTime, 0.03)\n      this.playing = true\n    }\n    if((step && this.playing) || (hold && step && this.playing)){\n      this.oscillators.osc1.detune.value = note*102\n      this.oscillators.osc1.frequency.value = step*220\n      this.oscillators.osc2.detune.value = note*98\n      this.oscillators.osc2.frequency.value = step*220\n    }\n    if(!step && this.oscillators.osc1){\n      this.stopAll()\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/fm.js","export default class Hat {\n  constructor(ctx){\n    this.context = ctx\n    this.prevOsc = null\n    this.buffer = noiseBuffer(ctx)\n  }\n  getNoise(){\n    const noise = this.context.createBufferSource();\n    noise.buffer = this.buffer\n    const noiseFilter = this.context.createBiquadFilter();\n    noiseFilter.type = 'highpass';\n    noiseFilter.frequency.value = 2500;\n    noise.connect(noiseFilter);\n\n    const noiseEnvelope = this.context.createGain();\n    noiseEnvelope.gain.value = 0.7\n    noiseFilter.connect(noiseEnvelope);\n    noiseEnvelope.connect(this.context.destination);\n    return [ noise, noiseEnvelope ]\n  }\n  stopAll(){\n    if(this.prevOsc){\n      this.prevOsc.stop(0)\n    }\n  }\n  play({ step }){\n    if(step){\n      this.stopAll()\n      const time = step === 1 ? 0.01 : 0.05\n      const [ noise, noiseEnvelope ] = this.getNoise()\n      this.prevOsc = noise\n      noise.start(0)\n      noiseEnvelope.gain.setTargetAtTime(0, this.context.currentTime, time);\n      noise.stop(this.context.currentTime + 0.30)\n    }\n  }\n}\n\nfunction noiseBuffer(context) {\n  const bufferSize = context.sampleRate;\n  const buffer = context.createBuffer(1, bufferSize, context.sampleRate);\n  const output = buffer.getChannelData(0);\n  for (var i = 0; i < bufferSize; i++) {\n    output[i] = Math.random() * 2 - 1;\n  }\n  return buffer;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/hat.js","export default class KickSynth {\n  constructor(ctx){\n    this.context = ctx\n    this.decay = 0\n    this.gainNode = this.context.createGain()\n    this.blipGain = this.context.createGain()\n    this.config = {\n      type: 'sine'\n    }\n  }\n  newOsc(){\n    return\n  }\n  setDecay(value){\n    this.decay = value\n  }\n  stopAll(){}\n  getOscillators(note){\n    const osc = this.context.createOscillator()\n    const blipOsc = this.context.createOscillator()\n    const gain = this.context.createGain()\n    const blipGain = this.context.createGain()\n    osc.frequency.value = 55\n    blipOsc.frequency.value = 440\n    osc.detune.value = note * 100\n    blipOsc.detune.value = note * 100\n    osc.connect(gain)\n    blipOsc.connect(blipGain)\n    gain.connect(this.context.destination)\n    blipGain.connect(this.context.destination)\n    return [ osc, gain, blipOsc, blipGain ]\n  }\n  play({ step, note }){\n    const [ osc, gain, blipOsc, blipGain ] = this.getOscillators(note)\n    if(step){\n      osc.start()\n      blipOsc.start()\n      gain.gain.setTargetAtTime(0, this.context.currentTime, 0.07 + (this.decay * 0.01));\n      blipGain.gain.setTargetAtTime(0, this.context.currentTime, 0.10);\n      blipOsc.frequency.setTargetAtTime(55, this.context.currentTime, 0.05)\n      osc.stop(this.context.currentTime+1)\n      blipOsc.stop(this.context.currentTime+1)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/kick.js","export default class LeadSynth {\n  constructor(ctx){\n    this.context = ctx\n    this.previousTone = 0\n    this.previousOct = 1\n    this.decay = 0\n    this.prevOsc = null\n    this.playing = false\n    this.config = {\n      type: 'sine'\n    }\n  }\n  newOsc(){\n    return\n  }\n  setDecay(value){\n    this.decay = value\n  }\n  setWave(value){\n    this.config.type = value\n  }\n  stopAll(){\n    if(!this.prevOsc) return\n    this.prevGainNode.gain.setTargetAtTime(0, this.context.currentTime+0.1+(this.decay*0.02), 0.05);\n    this.prevOsc.stop(this.context.currentTime+1)\n    this.prevOsc = null\n    this.playing = false\n  }\n  getOscillators(note, oct){\n  this.previousTone = note\n  this.previousOct = oct\n\n  const osc = this.context.createOscillator()\n  osc.detune.value = this.previousTone * 100\n  osc.frequency.value = this.previousOct * 220\n  osc.type = this.config.type\n\n  const gainNode = this.context.createGain()\n  gainNode.gain.value = 0\n\n  const filter = this.context.createBiquadFilter();\n  filter.type = 'lowpass'\n  filter.frequency.value = 0\n\n  osc.connect(filter)\n  filter.connect(gainNode)\n  gainNode.connect(this.context.destination)\n\n  return [ osc, gainNode, filter ]\n  }\n  play({ step, note, hold }){\n    if(step && !hold){\n      this.stopAll()\n      const [ osc, gainNode, filter ] = this.getOscillators(note, step)\n      this.prevOsc = osc\n      this.prevGainNode = gainNode\n      osc.start()\n      gainNode.gain.setTargetAtTime(0.4, this.context.currentTime, 0.001);\n      filter.frequency.setTargetAtTime(1000, this.context.currentTime, 0.03)\n      this.playing = true\n    }\n    if((step && this.playing) || (hold && step && this.playing)){\n      this.prevOsc.detune.setTargetAtTime(note*100, this.context.currentTime, 0.03)\n      this.prevOsc.frequency.setTargetAtTime(step*440, this.context.currentTime, 0.03)\n    }\n    if(!step && this.prevOsc){\n      this.stopAll()\n    }\n\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/leadSynth.js","export default class Snare {\n  constructor(ctx){\n    this.context = ctx\n    this.config = {\n      type: 'triangle'\n    }\n    this.buffer = noiseBuffer(ctx)\n  }\n  stopAll(){}\n  getNoise(){\n    const noise = this.context.createBufferSource();\n    noise.buffer = this.buffer\n    const noiseFilter = this.context.createBiquadFilter();\n    noiseFilter.type = 'highpass';\n    noiseFilter.frequency.value = 1000;\n    noise.connect(noiseFilter);\n\n    const noiseEnvelope = this.context.createGain();\n    noiseFilter.connect(noiseEnvelope);\n    noiseEnvelope.connect(this.context.destination);\n    return [ noise, noiseEnvelope ]\n  }\n  getOscillators(){\n  const osc = this.context.createOscillator();\n  osc.type = this.config.type;\n\n  const gain = this.context.createGain()\n  osc.connect(gain);\n  gain.connect(this.context.destination);\n  osc.frequency.value = 150\n  return [ osc, gain ]\n  }\n  play({ step }){\n    if(step){\n      const [ osc, gain ] = this.getOscillators()\n      const [ noise, noiseEnvelope ] = this.getNoise()\n      osc.start()\n      noise.start()\n      gain.gain.setTargetAtTime(0, this.context.currentTime, 0.04);\n      noiseEnvelope.gain.setTargetAtTime(0, this.context.currentTime, 0.03);\n      osc.stop(this.context.currentTime + 0.30)\n      noise.stop(this.context.currentTime + 0.30)\n    }\n  }\n}\n\nfunction noiseBuffer(context) {\n  const bufferSize = context.sampleRate;\n  const buffer = context.createBuffer(1, bufferSize, context.sampleRate);\n  const output = buffer.getChannelData(0);\n  for (var i = 0; i < bufferSize; i++) {\n    output[i] = Math.random() * 2 - 1;\n  }\n  return buffer;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/snare.js","export default class KeySynth {\n  constructor(ctx){\n    this.context = ctx\n    this.oscillators = {}\n    this.filterValue = 0\n    this.playing = false\n  }\n  newOsc(){\n    return\n  }\n  setFilter(value){\n    this.filterValue = value\n  }\n  stopAll(){\n    if(!this.oscillators.osc1) return\n    this.oscillators.gain[0].gain.setTargetAtTime(0, this.context.currentTime+0.05, 0.1)\n    this.oscillators.gain[1].gain.setTargetAtTime(0, this.context.currentTime+0.05, 0.1)\n    this.oscillators.gain[2].gain.setTargetAtTime(0, this.context.currentTime+0.05, 0.1)\n    this.oscillators.osc1.stop(this.context.currentTime+1)\n    this.oscillators.osc2.stop(this.context.currentTime+1)\n    this.oscillators.osc3.stop(this.context.currentTime+1)\n    this.oscillators = {}\n    this.playing = false\n  }\n  makeOscillator(waveform){\n    const osc = this.context.createOscillator()\n    osc.type = waveform\n    return osc\n  }\n  getOscillators(note, oct){\n    const osc1 = this.makeOscillator('triangle')\n    const osc2 = this.makeOscillator('sawtooth')\n    const osc3 = this.makeOscillator('sawtooth')\n    const gain = [\n      this.context.createGain(), this.context.createGain(), this.context.createGain()\n    ]\n    const filters = [\n      this.context.createBiquadFilter(), this.context.createBiquadFilter()\n    ]\n    filters[0].frequency.value = 500\n    filters[1].frequency.value = 500\n\n    osc1.connect(gain[0])\n    osc2.connect(filters[0])\n    osc3.connect(filters[1])\n    filters[0].connect(gain[1])\n    filters[1].connect(gain[2])\n    gain.forEach(g => {\n      g.gain.value = 0.4 - (this.filterValue * 0.05)\n      g.connect(this.context.destination)\n    })\n\n    return [ osc1, osc2, osc3, gain, filters ]\n  }\n  play({ step, note, hold }){\n    if(step && !hold){\n      this.stopAll()\n      let [ osc1, osc2, osc3, gain, filters ] = this.getOscillators(note, step)\n      this.oscillators = {\n        osc1, osc2, osc3,\n        gain, filters\n      }\n      filters[0].frequency.setTargetAtTime(this.filterValue*1000, this.context.currentTime+0.02, 0.2)\n      filters[1].frequency.setTargetAtTime(this.filterValue*1000, this.context.currentTime+0.02, 0.2)\n      osc1.start()\n      osc2.start()\n      osc3.start()\n      this.playing = true\n    }\n    if((step && this.playing) || (hold && step && this.playing && this.oscillators.osc1)){\n      this.oscillators.osc1.frequency.value = 55 * step\n      this.oscillators.osc2.frequency.value = 55 * step\n      this.oscillators.osc3.frequency.value = 110 * step\n      this.oscillators.osc1.detune.value = 99  * note\n      this.oscillators.osc2.detune.value = 101 * note\n      this.oscillators.osc3.detune.value = 100 * note\n    }\n    if(!step){\n      this.stopAll()\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/synth.js","import State from './state'\nimport { BinSwitch, OctaveSwitch } from './switch'\nimport Note from './note'\nimport {\n  Background,\n  PlayBtn,\n  BeatMarker,\n  Blinker,\n  Word,\n  Options,\n  PageButton\n } from './classes'\n\nconst canvas = document.getElementById('synth');\nconst ctx = canvas.getContext('2d');\nctx.font = '14px sans-serif'\nconst audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n\nconst state = new State(audioCtx)\n\nfor(var i = 0; i < 16; i++){\n  state.moduleMap[`${i+2}/12`] = new OctaveSwitch(i,'hat', state, ctx)\n  state.moduleMap[`${i+2}/13`] = new BinSwitch(i,'snare', state, ctx)\n  state.moduleMap[`${i+2}/14`] = new Note(i,'kick', state, ctx)\n  state.moduleMap[`${i+2}/15`] = new BinSwitch(i,'kick', state, ctx)\n\n  state.moduleMap[`${i+2}/5`] = new Note(i,'fmSynth', state, ctx)\n  state.moduleMap[`${i+2}/6`] = new OctaveSwitch(i,'fmSynth', state, ctx)\n  state.moduleMap[`${i+2}/7`] = new Note(i,'leadSynth', state, ctx)\n  state.moduleMap[`${i+2}/8`] = new OctaveSwitch(i,'leadSynth', state, ctx)\n  state.moduleMap[`${i+2}/9`] = new Note(i,'key', state, ctx)\n  state.moduleMap[`${i+2}/10`] = new OctaveSwitch(i,'key', state, ctx)\n\n  state.moduleMap[`${i+2}/2`] = new Blinker(i, state, ctx)\n}\n/* Play button */\nstate.blocks['0/0'] = new PlayBtn(ctx, state, 0, 0)\n/* 4 Beat markers */\nstate.blocks['2/16'] = new BeatMarker(ctx, 2*40, 16*40)\nstate.blocks['6/16'] = new BeatMarker(ctx, 6*40, 16*40)\nstate.blocks['10/16'] = new BeatMarker(ctx, 10*40, 16*40)\nstate.blocks['14/16'] = new BeatMarker(ctx, 14*40, 16*40)\n/* Instrument names */\nstate.blocks['0/6'] = new Word('FM', ctx, 0, 6*40)\nstate.blocks['0/8'] = new Word('Lead', ctx, 0, 8*40)\nstate.blocks['0/9'] = new Word('Bass', ctx, 0, 10*40)\nstate.blocks['0/15'] = new Word('Kick', ctx, 0, 15*40)\nstate.blocks['0/13'] = new Word('Snare', ctx, 0, 13*40)\nstate.blocks['0/12'] = new Word('Hat', ctx, 0, 12*40)\n\nconst updateKickDecay = state.instruments.kick.setDecay.bind(state.instruments.kick)\nstate.blocks['18/15'] = new Word('Decay', ctx, 18*40, 15*40)\nstate.blocks['19/15'] = new Options([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], updateKickDecay, ctx, 19*40+10, 15*40)\n\nconst updateLeadDecay = state.instruments.leadSynth.setDecay.bind(state.instruments.leadSynth)\nstate.blocks['18/8'] = new Word('Decay', ctx, 18*40, 8*40)\nstate.blocks['19/8'] = new Options([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], updateLeadDecay, ctx, 19*40+10, 8*40)\n\nconst updateBassFilter = state.instruments.key.setFilter.bind(state.instruments.key)\nstate.blocks['18/10'] = new Word('Filter', ctx, 18*40, 10*40)\nstate.blocks['19/10'] = new Options([0, 1, 2, 3, 4, 5, 6], updateBassFilter, ctx, 19*40+10, 10*40)\n\nconst updateLeadWave = state.instruments.leadSynth.setWave.bind(state.instruments.leadSynth)\nstate.blocks['21/8'] = new Word('Wave', ctx, 21*40, 8*40)\nstate.blocks['22/8'] = new Options(['sine','square', 'sawtooth'], updateLeadWave, ctx, 22*40+5, 8*40)\n\n\nconst pageButton = new PageButton(state, ctx, 2*40, 0)\nstate.blocks['2/0'] = pageButton\nstate.blocks['3/0'] = pageButton\nstate.blocks['4/0'] = pageButton\nstate.blocks['5/0'] = pageButton\n\nstate.blocks['7/0'] = new Word('Copy', ctx, 7*40, 0, state.copyPage.bind(state))\nstate.blocks['8/0'] = new Word('Paste', ctx, 8*40, 0, state.pastePage.bind(state))\n\ncanvas.onclick = function (e) {\n  let totalOffsetX = 0;\n  let totalOffsetY = 0;\n  let canvasX = 0;\n  let canvasY = 0;\n  let currentElement = this;\n  do {\n    totalOffsetX += currentElement.offsetLeft - currentElement.scrollLeft\n    totalOffsetY += currentElement.offsetTop - currentElement.scrollTop\n  } while(currentElement = currentElement.offsetParent)\n  canvasX = e.pageX - totalOffsetX - window.scrollX;\n  canvasY = e.pageY - totalOffsetY - window.scrollY;\n\n  let x = Math.floor(canvasX/40)\n  let y = Math.floor(canvasY/40)\n  let innerX = canvasX - (x * 40)\n  let innerY = canvasY - (y * 40)\n  const key = `${x}/${y}`\n  const module = state.blocks[key]\n  if(module){\n    state.blocks[key].handleClick(x, y, innerX, innerY)\n  }\n}\n\nwindow.onkeydown = function(e){\n  if(e.code && e.code === 'Space'){\n    state.togglePlay()\n  }\n}\n\nstate.initScreen()\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}