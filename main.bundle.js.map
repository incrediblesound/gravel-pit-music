{"version":3,"sources":["webpack:///webpack/bootstrap f260d9e489b1d84861b0","webpack:///./src/instruments/Listener.js","webpack:///./src/constants.js","webpack:///./src/state.js","webpack:///./src/ui/BeatMarker.js","webpack:///./src/ui/Blinker.js","webpack:///./src/ui/InstrumentWindow.js","webpack:///./src/ui/Options.js","webpack:///./src/ui/PageButton.js","webpack:///./src/ui/PlayBtn.js","webpack:///./src/ui/Tempo.js","webpack:///./src/ui/Volume.js","webpack:///./src/ui/Word.js","webpack:///./src/instruments/fm.js","webpack:///./src/instruments/hat.js","webpack:///./src/instruments/kick.js","webpack:///./src/instruments/leadSynth.js","webpack:///./src/instruments/snare.js","webpack:///./src/instruments/synth.js","webpack:///./src/main.js","webpack:///./src/ui/note.js","webpack:///./src/ui/switch.js"],"names":["Listener","action","property","value","COLOR","LOOP_LENGTH","makeStepArray","steps","empty","length","fill","undefined","arr","map","step","note","hold","State","audioCtx","swingIsOn","isPlaying","tempo","page","blocks","moduleMap","children","bass","kick","snare","lead","fm","hat","copyBuffer","notes","blinkers","context","child","push","message","type","instrument","drawScreen","copyPage","pastePage","idx","values","noteTime","startTime","currentTime","rhythmIndex","previousRhythmIndex","schedule","stop","Object","keys","forEach","stepKey","slice","assign","refreshScreen","contextPlayTime","toggle","instruments","play","advanceNote","interval","setTimeout","secondsPerBeat","key","stopAll","window","clearInterval","render","BeatMarker","ctx","x","y","fillStyle","fillRect","clearRect","Blinker","i","state","on","beginPath","arc","Math","PI","lineWidth","strokeStyle","stroke","InstrumentWindow","parent","build","trigger","name","split","parseInt","module","setPos","renderChildren","innerX","innerY","xCell","yCell","handleClick","Options","options","callBack","fillText","PageButton","pageOne","buttonIdx","offset","PlayBtn","togglePlay","tempoText","section","floor","Volume","cb","callback","abs","Word","word","fmSynth","volume","decay","prevOsc","oscillators","playing","waveform","data","osc1","gainNode1","gain","setTargetAtTime","gainNode2","osc2","modulator1","modulator2","modulatorA","modulatorB","oct","wave","modulator","createOscillator","modulatorGain","createGain","frequency","connect","pan","osc","gainNode","panNode","createStereoPanner","filter","createBiquadFilter","destination","getOscillator","filter1","filter2","getModulator","modulatorGainA","modulatorGainB","modulatorGain1","modulatorGain2","setupOscillators","storeOscillators","start","detune","Hat","buffer","noiseBuffer","noise","createBufferSource","noiseFilter","noiseEnvelope","time","getNoise","bufferSize","sampleRate","createBuffer","output","getChannelData","random","KickSynth","config","blipOsc","blipGain","getOscillators","LeadSynth","previousTone","previousOct","prevGainNode","Snare","KeySynth","filterValue","osc3","makeOscillator","filters","g","canvas","document","getElementById","getContext","font","AudioContext","webkitAudioContext","playBtn","pageButton","toggleSwing","instrumentWindow","k","onclick","e","totalOffsetX","totalOffsetY","canvasX","canvasY","currentElement","offsetLeft","scrollLeft","offsetTop","scrollTop","offsetParent","pageX","scrollX","pageY","scrollY","onkeydown","code","Note","getPage","noteIndex","BinSwitch","colors","OctaveSwitch","isHold"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 18);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f260d9e489b1d84861b0","export default class Listener {\n  setProp(action){\n    this[action.property] = action.value\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/Listener.js","export const COLOR = 'white'\nexport const LOOP_LENGTH = 16\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants.js","import KickSynth from './instruments/kick'\nimport LeadSynth from './instruments/leadSynth'\nimport fm from './instruments/fm'\nimport Snare from './instruments/snare'\nimport Hat from './instruments/hat'\nimport { LOOP_LENGTH } from './constants'\n\nfunction makeStepArray(steps){\n  let empty = []\n  empty.length = steps\n  empty.fill(undefined)\n  let arr = empty.map(item => ({ step: 0, note: 0, hold: false }))\n  return arr\n}\n\nexport default class State {\n  constructor(audioCtx) {\n    this.swingIsOn = false\n    this.isPlaying = false\n    this.tempo = 120\n    this.page = 0\n    this.blocks = {}\n    this.moduleMap = {}\n    this.children = []\n    this.steps = {\n      bass: [makeStepArray(16),makeStepArray(16), makeStepArray(16), makeStepArray(16)],\n      kick: [makeStepArray(16),makeStepArray(16), makeStepArray(16), makeStepArray(16)],\n      snare: [makeStepArray(16),makeStepArray(16), makeStepArray(16), makeStepArray(16)],\n      lead: [makeStepArray(16),makeStepArray(16), makeStepArray(16), makeStepArray(16)],\n      fm: [makeStepArray(16),makeStepArray(16), makeStepArray(16), makeStepArray(16)],\n      hat: [makeStepArray(16),makeStepArray(16), makeStepArray(16), makeStepArray(16)]\n    }\n    this.copyBuffer = { notes: {}, steps: {} }\n    this.blinkers = []\n    this.step = 0\n    this.context = audioCtx\n    // this.instruments = {\n    //   bass: new BassSynth(audioCtx),\n    //   kick: new KickSynth(audioCtx),\n    //   snare: new Snare(audioCtx),\n    //   fm: new fm(audioCtx),\n    //   lead: new LeadSynth(audioCtx),\n    //   hat: new Hat(audioCtx)\n    // }\n  }\n  push(child){\n    this.children.push(child)\n    return child\n  }\n  trigger(message){\n    switch (message.type) {\n      case 'get_page': return this.steps[message.instrument][this.page]\n      case 'toggle_swing': return this.swingIsOn = !this.swingIsOn\n      case 'set_page':\n        this.page = message.page\n        this.drawScreen()\n        return message.page\n      case 'copy_page': return this.copyPage()\n      case 'paste_page': return this.pastePage()\n    }\n  }\n  toggleStep(idx, type, values){\n    this.steps[type][this.page][idx].step = (this.steps[type][this.page][idx].step + 1) % values\n  }\n  togglePlay(){\n    this.isPlaying = !this.isPlaying\n\n    if(this.isPlaying){\n      this.noteTime = 0.0\n      this.startTime = this.context.currentTime + 0.005\n      this.rhythmIndex = 0\n      this.previousRhythmIndex = null\n      this.schedule()\n    } else {\n      this.stop()\n    }\n  }\n  copyPage(){\n    Object.keys(this.steps).forEach(stepKey => {\n      this.copyBuffer.steps[stepKey] = this.steps[stepKey][this.page].slice().map(step => Object.assign({}, step))\n    })\n  }\n  pastePage(){\n    Object.keys(this.steps).forEach(stepKey => {\n      this.steps[stepKey][this.page] = this.copyBuffer.steps[stepKey].slice()\n    })\n    this.refreshScreen()\n  }\n  schedule(){\n    let currentTime = this.context.currentTime\n    currentTime -= this.startTime\n\n    while (this.noteTime < currentTime + 0.200) {\n      var contextPlayTime = this.noteTime + this.startTime\n      this.blinkers[this.rhythmIndex].toggle()\n      if(this.previousRhythmIndex !== null) this.blinkers[this.previousRhythmIndex].toggle()\n      /* for each instrument pass the step object for this page and beat into the play method */\n      Object.keys(this.steps).forEach(type => {\n        this.instruments[type].play(this.steps[type][this.page][this.rhythmIndex])\n      })\n      this.advanceNote()\n    }\n    this.interval = setTimeout(() => { this.schedule() }, 0)\n  }\n  advanceNote(){\n    let secondsPerBeat = 60 / this.tempo\n    this.previousRhythmIndex = this.rhythmIndex\n    this.rhythmIndex++;\n    if (this.rhythmIndex === LOOP_LENGTH) {\n      this.rhythmIndex = 0;\n    }\n\n    if(this.swingIsOn){\n      this.noteTime += this.rhythmIndex % 2 ? 0.32 * secondsPerBeat : 0.18 * secondsPerBeat\n    } else {\n      this.noteTime += 0.25 * secondsPerBeat\n    }\n  }\n  stop(){\n    Object.keys(this.instruments).forEach(key => {\n      this.instruments[key].stopAll()\n    })\n    this.blinkers[this.previousRhythmIndex].toggle()\n    window.clearInterval(this.interval)\n  }\n  drawScreen(){\n    this.children.forEach(child => child.render())\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/state.js","export default class BeatMarker {\n  constructor(ctx, x, y){\n    this.context = ctx\n    this.x = x\n    this.y = y\n  }\n  render(){\n    this.context.fillStyle = 'red'\n    this.context.fillRect(this.x, this.y, 40, 40)\n    this.context.clearRect(this.x, this.y, 30, 30)\n  }\n  handleClick(){}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/BeatMarker.js","export default class Blinker {\n  constructor(i, state, ctx){\n    this.context = ctx\n    state.blinkers[i] = this\n  }\n  render(){\n    if(this.on){\n      this.context.beginPath();\n      this.context.arc(this.x+20, this.y+20, 8, 0, 2 * Math.PI, false);\n      this.context.fillStyle = 'red';\n      this.context.fill();\n      this.context.lineWidth = 1;\n      this.context.strokeStyle = '#003300';\n      this.context.stroke();\n    } else {\n      this.context.clearRect(this.x, this.y, 40, 40)\n    }\n  }\n  setPos(x, y){\n    this.x = x\n    this.y = y\n  }\n  handleClick(){}\n  toggle(){\n    this.on = !this.on\n    this.render()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Blinker.js","import BassSynth from '../instruments/synth'\nimport { BinSwitch, OctaveSwitch } from './switch'\nimport Note from './note'\n\nexport default class InstrumentWindow {\n  constructor(state, ctx, x, y){\n    this.x = x\n    this.y = y\n    this.parent = state\n    this.context = ctx\n    this.instrument = new BassSynth()\n    this.moduleMap = {}\n    this.build()\n  }\n  build(){\n    for(var i = 0; i < 16; i++){\n      this.moduleMap[`${i}/9`] = new Note(i, this, this.context)\n      this.moduleMap[`${i}/10`] = new OctaveSwitch(i, this, this.context)\n    }\n  }\n  trigger(message){\n    return this.parent.trigger(message)\n  }\n  getPage(){\n    return this.trigger({ type: 'get_page', instrument: this.instrument.name })\n  }\n  renderChildren(){\n    Object.keys(this.moduleMap).forEach(key => {\n      let [ x, y ] = key.split('/')\n      x = parseInt(x) * 40\n      y = parseInt(y) * 40\n      x += this.x\n      y += this.y\n      const module = this.moduleMap[key]\n      if(module.setPos) module.setPos(x, y)\n      module.render()\n    })\n  }\n  render(){\n    this.context.fillRect(this.x, this.y, 640, 480)\n    this.context.clearRect(this.x+1, this.y+1, 638, 478)\n    this.renderChildren()\n  }\n  handleClick(x, y, innerX, innerY){\n    let xCell = x - (this.x/40)\n    let yCell = y - (this.y/40)\n    this.moduleMap[`${xCell}/${yCell}`].handleClick(x, y, innerX, innerY)\n  }\n}\n\n/*\n    0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16\n0   . . . . . . . . . . .  .  .  .  .  .  .\n1   . . . . . . . . . . .  .  .  .  .  .  .\n2   . . . . . . . . . . .  .  .  .  .  .  .\n3   . . . . . . . . . . .  .  .  .  .  .  .\n4   . . . . . . . . . . .  .  .  .  .  .  .\n5   . . . . . . . . . . .  .  .  .  .  .  .\n6   . . . . . . . . . . .  .  .  .  .  .  .\n7   . . . . . . . . . . .  .  .  .  .  .  .\n8   . . . . . . . . . . .  .  .  .  .  .  .\n9   . . . . . . . . . . .  .  .  .  .  .  .\n10  . . . . . . . . . . .  .  .  .  .  .  .\n11  . . . . . . . . . . .  .  .  .  .  .  .\n*/\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/InstrumentWindow.js","export default class Options {\n  constructor(options, callBack, ctx, x, y){\n    this.context = ctx\n    this.idx = 0\n    this.options = options\n    this.callBack = callBack\n    this.x = x\n    this.y = y\n  }\n  render(){\n    this.context.fillStyle = 'black'\n    this.context.clearRect(this.x, this.y, 40, 40)\n    this.context.fillText(this.options[this.idx], this.x+3, this.y+25, 39);\n  }\n  handleClick(){\n    this.idx = (this.idx+1) % this.options.length\n    this.render()\n    this.callBack(this.options[this.idx])\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Options.js","export default class PageButton {\n  constructor(state, ctx, x, y, handleClick){\n    this.context = ctx\n    this.state = state\n    this.pageOne = x/40\n    this.x = x\n    this.y = y\n    this.value = 0\n    this.callBack = handleClick\n  }\n  handleClick(x, y){\n    const buttonIdx = x - this.pageOne\n    this.value = buttonIdx\n    this.state.trigger({ type: 'set_page', page: this.value })\n    this.render()\n  }\n  render(){\n    this.context.clearRect(this.x, this.y, 40, 160)\n    this.context.fillStyle = 'black'\n    for(let i = 0; i < 4; i++){\n      const offset = 40 * i\n      const name = `Pg ${i+1}`\n      this.context.fillRect(this.x+offset, this.y, 40, 40)\n      if(i === this.value){\n        this.context.fillStyle = '#999'\n        this.context.fillRect(this.x+offset+1, this.y, 39-(i === 3 ? 1 : 0), 39)\n      } else {\n        this.context.clearRect(this.x+offset+1, this.y, 39-(i === 3 ? 1 : 0), 39)\n      }\n      this.context.fillStyle = 'black'\n      this.context.fillText(name, this.x+offset+3, this.y+25, 80);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/PageButton.js","export default class PlayBtn {\n  constructor(ctx, state, x, y){\n    this.context = ctx\n    this.state = state\n    this.x = x\n    this.y = y\n    this.on = state.isPlaying\n  }\n  render(){\n    this.on = this.state.isPlaying\n    this.context.fillStyle = this.on ? 'red' : 'green'\n    this.context.fillRect(this.x, this.y, 40, 40)\n    this.context.fillStyle = this.on ? 'black' : 'white'\n    this.context.fillText(this.on ? 'STOP' : 'PLAY', this.x+1, this.y+25, 80);\n  }\n  handleClick(){\n    this.state.togglePlay()\n    this.on = this.state.isPlaying\n    this.render()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/PlayBtn.js","export default class PlayBtn {\n  constructor(state, ctx, x, y){\n    this.context = ctx\n    this.state = state\n    this.x = x\n    this.y = y\n  }\n  render(){\n    const tempoText = `${this.state.tempo}/bpms`\n    this.context.fillStyle = 'black'\n    this.context.clearRect(this.x, this.y, 65, 40)\n    this.context.fillText('+', this.x+25, this.y+10, 80);\n    this.context.fillText('-', this.x+26, this.y+40, 80);\n    this.context.fillText(tempoText, this.x, this.y+25, 80);\n  }\n  handleClick(x, y, innerX, innerY){\n    const section = Math.floor(innerY/20)\n    this.state.tempo = section ? this.state.tempo-1 : this.state.tempo+1\n    this.render()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Tempo.js","export default class Volume {\n  constructor(state, ctx, x, y, cb){\n    this.context = ctx\n    this.state = state\n    this.value = 8\n    this.x = x\n    this.y = y\n    this.callback = cb\n  }\n  render(){\n    this.context.fillStyle = 'black'\n    this.context.clearRect(this.x, this.y, 40, 40)\n    this.context.fillText('+', this.x+20, this.y+13, 40)\n    this.context.fillText('-', this.x+21, this.y+37, 40)\n    this.context.fillText(this.value, this.x, this.y+25, 40)\n  }\n  handleClick(x, y, innerX, innerY){\n    const section = Math.floor(innerY/20)\n    this.value = Math.abs((section ? this.value-1 : this.value+1) % 10)\n    this.callback(this.value)\n    this.render()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Volume.js","export default class Word {\n  constructor(word, ctx, x, y, handleClick){\n    this.context = ctx\n    this.word = word\n    this.x = x\n    this.y = y\n    this.handleClick = handleClick || function(){}\n  }\n  render(){\n    this.context.clearRect(this.x, this.y, 40, 40)\n    this.context.fillStyle = 'green'\n    this.context.fillText(this.word, this.x+3, this.y+25, 80);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Word.js","import Listener from './Listener'\nexport default class fmSynth extends Listener {\n  constructor(ctx){\n    super()\n    this.volume = 8\n    this.context = ctx\n    this.decay = 0\n    this.prevOsc = null\n    this.oscillators = {}\n    this.playing = false\n    this.waveform = 'square'\n  }\n  storeOscillators(data){\n    Object.keys(data).forEach(key => {\n      this.oscillators[key] = data[key]\n    })\n  }\n  stopAll(){\n    if(!this.oscillators.osc1) return\n    this.oscillators.gainNode1.gain.setTargetAtTime(0, this.context.currentTime+(this.decay*0.02), 0.05);\n    this.oscillators.gainNode2.gain.setTargetAtTime(0, this.context.currentTime+(this.decay*0.02), 0.05);\n    this.oscillators.osc1.stop(this.context.currentTime+1)\n    this.oscillators.osc2.stop(this.context.currentTime+1)\n    this.oscillators.modulator1.stop(this.context.currentTime+1)\n    this.oscillators.modulator2.stop(this.context.currentTime+1)\n    this.oscillators.modulatorA.stop(this.context.currentTime+1)\n    this.oscillators.modulatorB.stop(this.context.currentTime+1)\n    this.oscillators = {}\n    this.playing = false\n  }\n  getModulator(oct, wave, gain){\n    const modulator = this.context.createOscillator()\n    const modulatorGain = this.context.createGain()\n    modulator.type = wave\n    modulator.frequency.value = oct\n    modulatorGain.gain.value = gain\n    modulator.connect(modulatorGain)\n    return [ modulator, modulatorGain ]\n  }\n  getOscillator(pan){\n    const osc = this.context.createOscillator()\n    osc.type = this.waveform\n\n    const gainNode = this.context.createGain()\n    gainNode.gain.value = this.volume * 0.02\n\n    const panNode = this.context.createStereoPanner()\n    panNode.pan.value = pan === 'left' ? -0.7 : 0.7\n\n    const filter = this.context.createBiquadFilter();\n    filter.type = 'lowpass';\n    filter.frequency.value = 0;\n\n    osc.connect(filter)\n    filter.connect(gainNode)\n    gainNode.connect(panNode)\n    panNode.connect(this.context.destination)\n    return [ osc, filter, gainNode ]\n  }\n  setupOscillators(){\n    const [ osc1, filter1, gainNode1 ] = this.getOscillator('left')\n    const [ osc2, filter2, gainNode2 ] = this.getOscillator('right')\n    const [ modulatorA, modulatorGainA ] = this.getModulator(110, 'sine', 35)\n    const [ modulatorB, modulatorGainB ] = this.getModulator(220, 'sine', 30)\n    const [ modulator1, modulatorGain1 ] = this.getModulator(110, 'sawtooth', 10)\n    const [ modulator2, modulatorGain2 ] = this.getModulator(220, 'square', 20)\n    modulatorGainA.connect(modulator1.frequency)\n    modulatorGainB.connect(modulator2.frequency)\n    modulatorGain1.connect(osc1.frequency)\n    modulatorGain2.connect(osc2.frequency)\n    return [\n      osc1, osc2,\n      gainNode1, gainNode2,\n      modulatorA, modulatorB,\n      modulator1, modulator2,\n      filter1, filter2\n     ]\n  }\n  play({ step, note, hold }){\n    if(step && !hold){\n      this.stopAll()\n      const [\n        osc1, osc2,\n        gainNode1, gainNode2,\n        modulatorA, modulatorB,\n        modulator1, modulator2,\n        filter1, filter2\n      ] = this.setupOscillators(note, step)\n      this.storeOscillators({\n        osc1, osc2,\n        modulatorA, modulatorB,\n        modulator1, modulator2,\n        gainNode1, gainNode2\n      })\n      modulatorA.start()\n      modulatorB.start()\n      modulator1.start()\n      modulator2.start()\n      osc1.start()\n      osc2.start()\n      filter1.frequency.setTargetAtTime(5000, this.context.currentTime, 0.03)\n      filter2.frequency.setTargetAtTime(5000, this.context.currentTime, 0.03)\n      this.playing = true\n    }\n    if((step && this.playing) || (hold && step && this.playing)){\n      this.oscillators.osc1.detune.value = note*102\n      this.oscillators.osc1.frequency.value = step*220\n      this.oscillators.osc2.detune.value = note*98\n      this.oscillators.osc2.frequency.value = step*220\n    }\n    if(!step && this.oscillators.osc1){\n      this.stopAll()\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/fm.js","import Listener from './Listener'\n\nexport default class Hat extends Listener {\n  constructor(ctx){\n    super()\n    this.volume = 8\n    this.context = ctx\n    this.prevOsc = null\n    this.buffer = noiseBuffer(ctx)\n  }\n  getNoise(){\n    const noise = this.context.createBufferSource();\n    noise.buffer = this.buffer\n    const noiseFilter = this.context.createBiquadFilter();\n    noiseFilter.type = 'highpass';\n    noiseFilter.frequency.value = 2500;\n    noise.connect(noiseFilter);\n\n    const noiseEnvelope = this.context.createGain();\n    noiseEnvelope.gain.value = this.volume * 0.1\n    noiseFilter.connect(noiseEnvelope);\n    noiseEnvelope.connect(this.context.destination);\n    return [ noise, noiseEnvelope ]\n  }\n  stopAll(){\n    if(this.prevOsc){\n      this.prevOsc.stop(0)\n    }\n  }\n  play({ step }){\n    if(step){\n      this.stopAll()\n      const time = step === 1 ? 0.01 : 0.05\n      const [ noise, noiseEnvelope ] = this.getNoise()\n      this.prevOsc = noise\n      noise.start(0)\n      noiseEnvelope.gain.setTargetAtTime(0, this.context.currentTime, time);\n      noise.stop(this.context.currentTime + 0.30)\n    }\n  }\n}\n\nfunction noiseBuffer(context) {\n  const bufferSize = context.sampleRate;\n  const buffer = context.createBuffer(1, bufferSize, context.sampleRate);\n  const output = buffer.getChannelData(0);\n  for (var i = 0; i < bufferSize; i++) {\n    output[i] = Math.random() * 2 - 1;\n  }\n  return buffer;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/hat.js","import Listener from './Listener'\n\nexport default class KickSynth extends Listener {\n  constructor(ctx){\n    super()\n    this.volume = 8\n    this.context = ctx\n    this.decay = 0\n    this.config = {\n      type: 'sine'\n    }\n  }\n  stopAll(){}\n  getOscillators(note){\n    const osc = this.context.createOscillator()\n    const blipOsc = this.context.createOscillator()\n    const gain = this.context.createGain()\n    const blipGain = this.context.createGain()\n    gain.gain.value = this.volume * 0.1\n    blipGain.gain.value = this.volume * 0.1\n    osc.frequency.value = 55\n    blipOsc.frequency.value = 440\n    osc.detune.value = note * 100\n    blipOsc.detune.value = note * 100\n    osc.connect(gain)\n    blipOsc.connect(blipGain)\n    gain.connect(this.context.destination)\n    blipGain.connect(this.context.destination)\n    return [ osc, gain, blipOsc, blipGain ]\n  }\n  play({ step, note }){\n    const [ osc, gain, blipOsc, blipGain ] = this.getOscillators(note)\n    if(step){\n      osc.start()\n      blipOsc.start()\n      gain.gain.setTargetAtTime(0, this.context.currentTime, 0.07 + (this.decay * 0.01));\n      blipGain.gain.setTargetAtTime(0, this.context.currentTime, 0.10);\n      blipOsc.frequency.setTargetAtTime(55, this.context.currentTime, 0.05)\n      osc.stop(this.context.currentTime+1)\n      blipOsc.stop(this.context.currentTime+1)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/kick.js","import Listener from './Listener'\n\nexport default class LeadSynth extends Listener {\n  constructor(ctx){\n    super()\n    this.volume = 8\n    this.context = ctx\n    this.previousTone = 0\n    this.previousOct = 1\n    this.decay = 0\n    this.prevOsc = null\n    this.playing = false\n    this.waveform = 'sine'\n  }\n  stopAll(){\n    if(!this.prevOsc) return\n    this.prevGainNode.gain.setTargetAtTime(0, this.context.currentTime+0.1+(this.decay*0.02), 0.05);\n    this.prevOsc.stop(this.context.currentTime+1)\n    this.prevOsc = null\n    this.playing = false\n  }\n  getOscillators(note, oct){\n  this.previousTone = note\n  this.previousOct = oct\n\n  const osc = this.context.createOscillator()\n  osc.detune.value = this.previousTone * 100\n  osc.frequency.value = this.previousOct * 220\n  osc.type = this.waveform\n\n  const gainNode = this.context.createGain()\n  gainNode.gain.value = 0\n\n  const filter = this.context.createBiquadFilter();\n  // filter.type = 'lowpass'\n  filter.frequency.value = 2500\n\n  osc.connect(filter)\n  filter.connect(gainNode)\n  gainNode.connect(this.context.destination)\n\n  return [ osc, gainNode, filter ]\n  }\n  play({ step, note, hold }){\n    if(step && !hold){\n      this.stopAll()\n      const [ osc, gainNode, filter ] = this.getOscillators(note, step)\n      this.prevOsc = osc\n      this.prevGainNode = gainNode\n      osc.start()\n      gainNode.gain.setTargetAtTime(this.volume*0.1, this.context.currentTime+0.01, 0.02);\n      filter.frequency.setTargetAtTime(500, this.context.currentTime+0.1, 0.03)\n      this.playing = true\n    }\n    if((step && this.playing) || (hold && step && this.playing)){\n      this.prevOsc.detune.setTargetAtTime(note*100, this.context.currentTime, 0.03)\n      this.prevOsc.frequency.setTargetAtTime(step*440, this.context.currentTime, 0.03)\n    }\n    if(!step && this.prevOsc){\n      this.stopAll()\n    }\n\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/leadSynth.js","import Listener from './Listener'\n\nexport default class Snare extends Listener {\n  constructor(ctx){\n    super()\n    this.volume = 8\n    this.context = ctx\n    this.config = {\n      type: 'triangle'\n    }\n    this.buffer = noiseBuffer(ctx)\n  }\n  setVolume(value){\n    this.volume = value\n  }\n  stopAll(){}\n  getNoise(){\n    const noise = this.context.createBufferSource();\n    noise.buffer = this.buffer\n\n    const noiseFilter = this.context.createBiquadFilter();\n    noiseFilter.type = 'highpass';\n    noiseFilter.frequency.value = 1000;\n\n    const noiseEnvelope = this.context.createGain();\n    noiseEnvelope.gain.value = this.volume * 0.1\n\n    noise.connect(noiseFilter);\n    noiseFilter.connect(noiseEnvelope);\n    noiseEnvelope.connect(this.context.destination);\n    return [ noise, noiseEnvelope ]\n  }\n  getOscillators(){\n  const osc = this.context.createOscillator();\n  osc.type = this.config.type;\n  osc.frequency.value = 150\n\n  const gain = this.context.createGain()\n  gain.gain.value = this.volume * 0.1\n  osc.connect(gain);\n  gain.connect(this.context.destination);\n  return [ osc, gain ]\n  }\n  play({ step }){\n    if(step){\n      const [ osc, gain ] = this.getOscillators()\n      const [ noise, noiseEnvelope ] = this.getNoise()\n      osc.start()\n      noise.start()\n      gain.gain.setTargetAtTime(0, this.context.currentTime, 0.04);\n      noiseEnvelope.gain.setTargetAtTime(0, this.context.currentTime, 0.03);\n      osc.stop(this.context.currentTime + 0.30)\n      noise.stop(this.context.currentTime + 0.30)\n    }\n  }\n}\n\nfunction noiseBuffer(context) {\n  const bufferSize = context.sampleRate;\n  const buffer = context.createBuffer(1, bufferSize, context.sampleRate);\n  const output = buffer.getChannelData(0);\n  for (var i = 0; i < bufferSize; i++) {\n    output[i] = Math.random() * 2 - 1;\n  }\n  return buffer;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/snare.js","import Listener from './Listener'\n\nexport default class KeySynth extends Listener {\n  constructor(ctx){\n    super()\n    this.name = 'bass'\n    this.volume = 8\n    this.context = ctx\n    this.oscillators = {}\n    this.filterValue = 0\n    this.playing = false\n  }\n  stopAll(){\n    if(!this.oscillators.osc1) return\n    this.oscillators.gain[0].gain.setTargetAtTime(0, this.context.currentTime+0.05, 0.1)\n    this.oscillators.gain[1].gain.setTargetAtTime(0, this.context.currentTime+0.05, 0.1)\n    this.oscillators.gain[2].gain.setTargetAtTime(0, this.context.currentTime+0.05, 0.1)\n    this.oscillators.osc1.stop(this.context.currentTime+1)\n    this.oscillators.osc2.stop(this.context.currentTime+1)\n    this.oscillators.osc3.stop(this.context.currentTime+1)\n    this.oscillators = {}\n    this.playing = false\n  }\n  makeOscillator(waveform){\n    const osc = this.context.createOscillator()\n    osc.type = waveform\n    return osc\n  }\n  getOscillators(note, oct){\n    const osc1 = this.makeOscillator('triangle')\n    const osc2 = this.makeOscillator('sawtooth')\n    const osc3 = this.makeOscillator('sawtooth')\n    const gain = [\n      this.context.createGain(), this.context.createGain(), this.context.createGain()\n    ]\n    const filters = [\n      this.context.createBiquadFilter(), this.context.createBiquadFilter()\n    ]\n    filters[0].frequency.value = this.filterValue * 1000\n    filters[1].frequency.value = this.filterValue * 1000\n\n    osc1.connect(gain[0])\n    osc2.connect(filters[0])\n    osc3.connect(filters[1])\n    filters[0].connect(gain[1])\n    filters[1].connect(gain[2])\n    gain.forEach(g => {\n      g.gain.value = (this.volume * 0.1) - (this.filterValue * 0.05)\n      g.connect(this.context.destination)\n    })\n\n    return [ osc1, osc2, osc3, gain, filters ]\n  }\n  play({ step, note, hold }){\n    if(step && !hold){\n      this.stopAll()\n      let [ osc1, osc2, osc3, gain, filters ] = this.getOscillators(note, step)\n      this.oscillators = {\n        osc1, osc2, osc3,\n        gain, filters\n      }\n      filters[0].frequency.setTargetAtTime(0, this.context.currentTime+0.02, 0.2)\n      filters[1].frequency.setTargetAtTime(0, this.context.currentTime+0.02, 0.2)\n      osc1.start()\n      osc2.start()\n      osc3.start()\n      this.playing = true\n    }\n    if((step && this.playing) || (hold && step && this.playing && this.oscillators.osc1)){\n      this.oscillators.osc1.frequency.value = 55 * step\n      this.oscillators.osc2.frequency.value = 55 * step\n      this.oscillators.osc3.frequency.value = 110 * step\n      this.oscillators.osc1.detune.value = 99  * note\n      this.oscillators.osc2.detune.value = 101 * note\n      this.oscillators.osc3.detune.value = 100 * note\n    }\n    if(!step){\n      this.stopAll()\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/synth.js","import State from './state'\nimport PlayBtn from './ui/PlayBtn'\nimport BeatMarker from './ui/BeatMarker'\nimport Blinker from './ui/Blinker'\nimport Word from './ui/Word'\nimport Options from './ui/Options'\nimport PageButton from './ui/PageButton'\nimport Tempo from './ui/Tempo'\nimport Volume from './ui/Volume'\nimport InstrumentWindow from './ui/InstrumentWindow'\n\nconst canvas = document.getElementById('synth');\nconst ctx = canvas.getContext('2d');\nctx.font = '14px sans-serif'\nconst audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n\nconst state = new State(audioCtx)\n\n// for(var i = 0; i < 16; i++){\n//   state.moduleMap[`${i+2}/12`] = new OctaveSwitch(i,'hat', state, ctx)\n//   state.moduleMap[`${i+2}/13`] = new BinSwitch(i,'snare', state, ctx)\n//   state.moduleMap[`${i+2}/14`] = new Note(i,'kick', state, ctx)\n//   state.moduleMap[`${i+2}/15`] = new BinSwitch(i,'kick', state, ctx)\n//\n//   state.moduleMap[`${i+2}/5`] = new Note(i,'fm', state, ctx)\n//   state.moduleMap[`${i+2}/6`] = new OctaveSwitch(i,'fm', state, ctx)\n//   state.moduleMap[`${i+2}/7`] = new Note(i,'lead', state, ctx)\n//   state.moduleMap[`${i+2}/8`] = new OctaveSwitch(i,'lead', state, ctx)\n//   state.moduleMap[`${i+2}/9`] = new Note(i,'bass', state, ctx)\n//   state.moduleMap[`${i+2}/10`] = new OctaveSwitch(i,'bass', state, ctx)\n//\n//   state.moduleMap[`${i+2}/2`] = new Blinker(i, state, ctx)\n// }\n/* Play button */\nconst playBtn = state.push(new PlayBtn(ctx, state, 0, 0))\nstate.blocks['0/0'] = playBtn\n\n\n/* Page controls */\nconst pageButton = state.push(new PageButton(state, ctx, 2*40, 0))\nstate.blocks['2/0'] = pageButton\nstate.blocks['3/0'] = pageButton\nstate.blocks['4/0'] = pageButton\nstate.blocks['5/0'] = pageButton\n\nstate.blocks['7/0'] = state.push(new Word('Copy', ctx, 7*40, 0, () => state.message({ type: 'copy_page'})))\nstate.blocks['8/0'] = state.push(new Word('Paste', ctx, 8*40, 0, () => state.message({ type: 'paste_page'})))\n/* Tempo */\nconst tempo = state.push(new Tempo(state, ctx, 11*40, 0))\nstate.blocks['11/0'] = tempo\nstate.blocks['12/0'] = tempo\n\nconst toggleSwing = () => state.message({ type: 'toggle_swing' })\nstate.blocks['14/0'] = state.push(new Options(['straight', 'swing'], toggleSwing, ctx, 14*40, 0))\n\nconst instrumentWindow = state.push(new InstrumentWindow(state, ctx, 4*40, 3*40))\nfor(let i = 4; i < 12; i++){\n  for(let k = 3; k < 16; k++){\n    state.blocks[`${i}/${k}`] = instrumentWindow\n  }\n}\n\n// /* 4 Beat markers */\n// state.blocks['2/16'] = new BeatMarker(ctx, 2*40, 16*40)\n// state.blocks['6/16'] = new BeatMarker(ctx, 6*40, 16*40)\n// state.blocks['10/16'] = new BeatMarker(ctx, 10*40, 16*40)\n// state.blocks['14/16'] = new BeatMarker(ctx, 14*40, 16*40)\n// /* Instrument names & volume control */\n// state.blocks['0/6'] = new Word('FM', ctx, 0, 6*40)\n// state.blocks['1/6'] = new Volume(state, ctx, 1*40, 6*40, (value) => {\n//   state.instruments.fm.setProp({ property: 'volume', value })\n// })\n// state.blocks['0/8'] = new Word('Lead', ctx, 0, 8*40)\n// state.blocks['1/8'] = new Volume(state, ctx, 1*40, 8*40, (value) => {\n//   state.instruments.lead.setProp({ property: 'volume', value })\n// })\n// state.blocks['0/10'] = new Word('Bass', ctx, 0, 10*40)\n// state.blocks['1/10'] = new Volume(state, ctx, 1*40, 10*40, (value) => {\n//   state.instruments.bass.setProp({ property: 'volume', value })\n// })\n// state.blocks['0/15'] = new Word('Kick', ctx, 0, 15*40)\n// state.blocks['1/15'] = new Volume(state, ctx, 1*40, 15*40, (value) => {\n//   state.instruments.kick.setProp({ property: 'volume', value })\n// })\n// state.blocks['0/13'] = new Word('Snr', ctx, 0, 13*40)\n// state.blocks['1/13'] = new Volume(state, ctx, 1*40, 13*40, (value) => {\n//   state.instruments.snare.setProp({ property: 'volume', value })\n// })\n// state.blocks['0/12'] = new Word('Hat', ctx, 0, 12*40)\n// state.blocks['1/12'] = new Volume(state, ctx, 1*40, 12*40, (value) => {\n//   state.instruments.hat.setProp({ property: 'volume', value })\n// })\n//\n// const updateKickDecay = (value) => state.instruments.kick.setProp({ property: 'decay', value })\n// state.blocks['18/15'] = new Word('Decay', ctx, 18*40, 15*40)\n// state.blocks['19/15'] = new Options([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], updateKickDecay, ctx, 19*40+10, 15*40)\n//\n// const updateLeadDecay = (value) => state.instruments.lead.setProp({ property: 'decay', value })\n// state.blocks['18/8'] = new Word('Decay', ctx, 18*40, 8*40)\n// state.blocks['19/8'] = new Options([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], updateLeadDecay, ctx, 19*40+10, 8*40)\n//\n// const updateBassFilter = (value) => state.instruments.bass.setProp({ property: 'filterValue', value })\n// state.blocks['18/10'] = new Word('Filter', ctx, 18*40, 10*40)\n// state.blocks['19/10'] = new Options([0, 1, 2, 3, 4, 5, 6], updateBassFilter, ctx, 19*40+10, 10*40)\n//\n// const updateLeadWave = (value) => state.instruments.lead.setProp({ property: 'waveform', value })\n// state.blocks['21/8'] = new Word('Wave', ctx, 21*40, 8*40)\n// state.blocks['22/8'] = new Options(['sine','square', 'sawtooth'], updateLeadWave, ctx, 22*40+5, 8*40)\n\ncanvas.onclick = function (e) {\n  let totalOffsetX = 0;\n  let totalOffsetY = 0;\n  let canvasX = 0;\n  let canvasY = 0;\n  let currentElement = this;\n  do {\n    totalOffsetX += currentElement.offsetLeft - currentElement.scrollLeft\n    totalOffsetY += currentElement.offsetTop - currentElement.scrollTop\n  } while(currentElement = currentElement.offsetParent)\n  canvasX = e.pageX - totalOffsetX - window.scrollX;\n  canvasY = e.pageY - totalOffsetY - window.scrollY;\n\n  let x = Math.floor(canvasX/40)\n  let y = Math.floor(canvasY/40)\n  let innerX = canvasX - (x * 40)\n  let innerY = canvasY - (y * 40)\n  const key = `${x}/${y}`\n  const module = state.blocks[key]\n  if(module){\n    state.blocks[key].handleClick(x, y, innerX, innerY)\n  }\n}\n\nwindow.onkeydown = function(e){\n  if(e.code && e.code === 'Space'){\n    state.togglePlay()\n    playBtn.render()\n  }\n}\n\nstate.drawScreen()\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","export default class Note {\n  constructor(idx, parent, context){\n    this.notes = ['c','c#','d','d#','e','f','f#','g','g#','a','a#','b'],\n    this.parent = parent\n    this.context = context\n    this.idx = idx\n  }\n  setPos(x, y){\n    this.x = x\n    this.y = y\n  }\n  render(){\n    this.context.fillStyle = 'black'\n    this.context.fillRect(this.x, this.y, 40, 40)\n    this.context.clearRect(this.x+1, this.y+1, 38, 38)\n    const page = this.parent.getPage()\n    const noteIndex = page[this.idx].note\n    this.context.fillText(this.notes[noteIndex], this.x+15, this.y+25, 15);\n  }\n  handleClick(){\n    const page = this.parent.getPage()\n    page[this.idx].note = page[this.idx].note === 11 ? 0 : page[this.idx].note+1\n    this.render()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/note.js","import { COLOR } from '../constants'\n\nexport class BinSwitch {\n  constructor(idx, state, ctx){\n    this.idx = idx\n    this.state = state\n    this.context = ctx\n    this.x = null\n    this.y = null\n    this.colors = ['black', 'red']\n  }\n  render(){\n    const page = this.state.getPage()\n    this.context.fillStyle = this.colors[page[this.idx].step]\n    this.context.fillRect(this.x, this.y, 39, 39)\n    this.context.fillStyle = COLOR\n  }\n  setPos(x, y){\n    this.x = x\n    this.y = y\n  }\n  handleClick(){\n    const page = this.state.getPage()\n    this.value = (this.value+1) % 2\n    page[this.idx].step = this.value\n    this.context.clearRect(this.x, this.y, 39, 39)\n    this.context.fillStyle = this.colors[page[this.idx].step]\n    this.context.fillRect(this.x, this.y, 39, 39)\n    this.context.fillStyle = COLOR\n  }\n}\n\nexport class OctaveSwitch {\n  constructor(idx, state, ctx){\n    this.idx = idx\n    this.state = state\n    this.context = ctx\n    this.x = null\n    this.y = null\n    this.colors = ['black', 'red', 'blue']\n  }\n  render(){\n    const page = this.state.getPage()\n    this.context.fillStyle = this.colors[page[this.idx].step]\n    this.context.fillRect(this.x, this.y, 39, 39)\n    this.context.fillStyle = page[this.idx].hold ? 'green' : 'yellow'\n    this.context.fillRect(this.x, this.y, 10, 10)\n    this.context.fillStyle = COLOR\n  }\n  setPos(x, y){\n    this.x = x\n    this.y = y\n  }\n  handleClick(x, y, innerX, innerY){\n    const isHold = innerX <= 10 && innerY <= 10\n    const page = this.state.getPage()\n    if(isHold){\n      page[this.idx].hold = !page[this.idx].hold\n    } else {\n      this.value = (page[this.idx].step+1) % 3\n      page[this.idx].step = this.value\n    }\n    this.context.clearRect(this.x, this.y, 39, 39)\n    this.render()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/switch.js"],"sourceRoot":""}