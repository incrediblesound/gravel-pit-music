{"version":3,"sources":["webpack:///webpack/bootstrap 456e748bee24f499352d","webpack:///./src/instruments/Listener.js","webpack:///./src/ui/InstrumentControlValue.js","webpack:///./src/instruments/synth.js","webpack:///./src/ui/Options.js","webpack:///./src/constants.js","webpack:///./src/instruments/fm.js","webpack:///./src/instruments/hat.js","webpack:///./src/instruments/kick.js","webpack:///./src/instruments/leadSynth.js","webpack:///./src/instruments/snare.js","webpack:///./src/state.js","webpack:///./src/ui/BeatMarker.js","webpack:///./src/ui/Button.js","webpack:///./src/ui/InstrumentWindow.js","webpack:///./src/ui/PageButton.js","webpack:///./src/ui/PlayBtn.js","webpack:///./src/ui/Tempo.js","webpack:///./src/ui/Word.js","webpack:///./src/instruments/instrumentControlFunctions.js","webpack:///./src/main.js","webpack:///./src/ui/Blinker.js","webpack:///./src/ui/InstrumentControlOptions.js","webpack:///./src/ui/ValueInput.js","webpack:///./src/ui/note.js","webpack:///./src/ui/switch.js"],"names":["Listener","action","property","value","ControlValue","ctx","x","y","text","initialValue","maxValue","cb","context","valueInput","innerX","innerY","handleClick","fillStyle","fillRect","clearRect","fillText","render","KeySynth","name","volume","oscillators","filterValue","playing","osc1","gain","setTargetAtTime","currentTime","stop","osc2","osc3","waveform","osc","createOscillator","type","note","oct","makeOscillator","createGain","filters","createBiquadFilter","frequency","connect","forEach","g","destination","step","hold","stopAll","getOscillators","start","detune","bassControlFunction","state","modules","moduleMap","initialVolume","instruments","bass","setProp","push","initialFilter","filter","Options","options","currentValue","idx","undefined","indexOf","callBack","textWidth","Math","ceil","measureText","width","offset","length","COLOR","LOOP_LENGTH","fmModeMethods","fmSynth","decay","prevOsc","waveformOptions","fmMode","data","Object","keys","key","gainNode1","gainNode2","modulator1","modulator2","modulatorA","modulatorB","wave","modulator","modulatorGain","pan","gainNode","panNode","createStereoPanner","panValue","getOscillator","filter1","filter2","getModulator","modulatorGainA","modulatorGainB","modulatorGain1","modulatorGain2","methodName","storeOscillators","fmControlFunction","fm","initialDecay","Hat","buffer","noiseBuffer","noise","createBufferSource","noiseFilter","noiseEnvelope","time","getNoise","bufferSize","sampleRate","createBuffer","output","getChannelData","i","random","hatControlFunction","hat","KickSynth","attack","config","blipOsc","blipGain","kickControlFunction","kick","initialAttack","LeadSynth","previousTone","previousOct","prevGainNode","leadControlFunction","lead","Snare","snareControlFunction","snare","makeStepArray","steps","empty","fill","arr","map","State","audioCtx","swingIsOn","isPlaying","tempo","page","blocks","blinkers","children","copyBuffer","notes","child","message","instrument","drawScreen","copyPage","pastePage","values","noteTime","startTime","rhythmIndex","previousRhythmIndex","schedule","stepKey","slice","assign","refreshScreen","contextPlayTime","toggle","play","advanceNote","interval","setTimeout","secondsPerBeat","window","clearInterval","BeatMarker","Button","toggled","isToggled","wordMargin","InstrumentWindow","parent","instrumentControlMap","instrumentControls","build","buildInstrumentControls","trigger","renderChildren","xCell","yCell","module","PageButton","pageOne","buttonIdx","PlayBtn","on","togglePlay","tempoText","section","floor","Word","word","canvas","document","getElementById","getContext","font","AudioContext","webkitAudioContext","playBtn","pageButton","toggleSwing","swingToggle","instrumentWindow","k","startX","btn","setInstrument","onclick","e","totalOffsetX","totalOffsetY","canvasX","canvasY","currentElement","offsetLeft","scrollLeft","offsetTop","scrollTop","offsetParent","pageX","scrollX","pageY","scrollY","pageKeys","onkeydown","code","parseInt","split","instrumentIdx","nextInstrumentIdx","Blinker","drawCircle","beginPath","arc","PI","lineWidth","strokeStyle","stroke","ControlOptions","ValueInput","callback","abs","Note","getPage","noteIndex","BinSwitch","colors","OctaveSwitch","isHold"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 19);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 456e748bee24f499352d","export default class Listener {\n  setProp(action){\n    this[action.property] = action.value\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/Listener.js","import ValueInput from './ValueInput'\n\nexport default class ControlValue {\n  constructor(ctx, x, y, text, initialValue, maxValue, cb){\n    this.context = ctx\n    this.x = x\n    this.y = y\n    this.text = text\n    this.valueInput = new ValueInput({\n      ctx, x: x+80, y, initialValue, maxValue, cb\n    })\n  }\n  handleClick(x, y, innerX, innerY){\n    this.valueInput.handleClick(x, y, innerX, innerY)\n  }\n  render(){\n    this.context.fillStyle = 'black'\n    this.context.fillRect(this.x, this.y, 120, 40)\n    this.context.clearRect(this.x+1, this.y+1, 118, 38)\n    this.context.fillText(this.text, this.x+5, this.y+25, 80);\n    this.valueInput.render()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/InstrumentControlValue.js","import Listener from './Listener'\nimport ControlValue from '../ui/InstrumentControlValue'\n\nexport default class KeySynth extends Listener {\n  constructor(ctx){\n    super()\n    this.name = 'bass'\n    this.volume = 8\n    this.context = ctx\n    this.oscillators = {}\n    this.filterValue = 1\n    this.playing = false\n  }\n  stopAll(){\n    if(!this.oscillators.osc1) return\n    this.oscillators.gain[0].gain.setTargetAtTime(0, this.context.currentTime+0.05, 0.1)\n    this.oscillators.gain[1].gain.setTargetAtTime(0, this.context.currentTime+0.05, 0.1)\n    this.oscillators.gain[2].gain.setTargetAtTime(0, this.context.currentTime+0.05, 0.1)\n    this.oscillators.osc1.stop(this.context.currentTime+1)\n    this.oscillators.osc2.stop(this.context.currentTime+1)\n    this.oscillators.osc3.stop(this.context.currentTime+1)\n    this.oscillators = {}\n    this.playing = false\n  }\n  makeOscillator(waveform){\n    const osc = this.context.createOscillator()\n    osc.type = waveform\n    return osc\n  }\n  getOscillators(note, oct){\n    const osc1 = this.makeOscillator('triangle')\n    const osc2 = this.makeOscillator('sawtooth')\n    const osc3 = this.makeOscillator('sawtooth')\n    const gain = [\n      this.context.createGain(), this.context.createGain(), this.context.createGain()\n    ]\n    const filters = [\n      this.context.createBiquadFilter(), this.context.createBiquadFilter()\n    ]\n    filters[0].frequency.value = this.filterValue * 1000\n    filters[1].frequency.value = this.filterValue * 1000\n\n    osc1.connect(gain[0])\n    osc2.connect(filters[0])\n    osc3.connect(filters[1])\n    filters[0].connect(gain[1])\n    filters[1].connect(gain[2])\n    gain.forEach(g => {\n      g.gain.value = (this.volume * 0.1) - (this.filterValue * 0.05)\n      g.connect(this.context.destination)\n    })\n\n    return [ osc1, osc2, osc3, gain, filters ]\n  }\n  play({ step, note, hold }){\n    if(step && !hold){\n      this.stopAll()\n      let [ osc1, osc2, osc3, gain, filters ] = this.getOscillators(note, step)\n      this.oscillators = {\n        osc1, osc2, osc3,\n        gain, filters\n      }\n      filters[0].frequency.setTargetAtTime(0, this.context.currentTime+0.02, 0.2)\n      filters[1].frequency.setTargetAtTime(0, this.context.currentTime+0.02, 0.2)\n      osc1.start()\n      osc2.start()\n      osc3.start()\n      this.playing = true\n    }\n    if((step && this.playing) || (hold && step && this.playing && this.oscillators.osc1)){\n      this.oscillators.osc1.frequency.value = 55 * step\n      this.oscillators.osc2.frequency.value = 55 * step\n      this.oscillators.osc3.frequency.value = 110 * step\n      this.oscillators.osc1.detune.value = 99  * note\n      this.oscillators.osc2.detune.value = 101 * note\n      this.oscillators.osc3.detune.value = 100 * note\n    }\n    if(!step){\n      this.stopAll()\n    }\n  }\n}\n\nexport const bassControlFunction = (state, modules, moduleMap, ctx, x, y) => {\n  const initialVolume = state.instruments.bass.volume\n  const volume = new ControlValue(ctx, x, y, 'Volume', initialVolume, 10, (value) => {\n      state.instruments.bass.setProp({ property: 'volume', value })\n  })\n  modules.push(volume)\n  moduleMap['0/0'] = volume\n  moduleMap['1/0'] = volume\n  moduleMap['2/0'] = volume\n\n  const initialFilter = state.instruments.bass.filterValue\n  const filter = new ControlValue(ctx, x+3*40, y, 'Filter', initialFilter, 10, (value) => {\n      state.instruments.bass.setProp({ property: 'filterValue', value })\n  })\n  modules.push(filter)\n  moduleMap['3/0'] = filter\n  moduleMap['4/0'] = filter\n  moduleMap['5/0'] = filter\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/synth.js","export default class Options {\n  constructor({ options, currentValue, cb, ctx, x, y }){\n    this.context = ctx\n    this.idx = currentValue !== undefined ? options.indexOf(currentValue) : 0\n    this.options = options\n    this.callBack = cb\n    this.x = x\n    this.y = y\n  }\n  render(){\n    this.context.fillStyle = 'black'\n    this.context.fillRect(this.x, this.y, 80, 40)\n    this.context.clearRect(this.x+1, this.y+1, 78, 38)\n    const text = this.options[this.idx]\n    const textWidth = Math.ceil(this.context.measureText(text).width)\n    const offset = 40 - textWidth/2\n    this.context.fillText(text, this.x+offset, this.y+25, 39);\n  }\n  handleClick(){\n    this.idx = (this.idx+1) % this.options.length\n    this.render()\n    this.callBack(this.options[this.idx])\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Options.js","export const COLOR = 'white'\nexport const LOOP_LENGTH = 16\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants.js","import Listener from './Listener'\nimport ControlValue from '../ui/InstrumentControlValue'\nimport ControlOptions from '../ui/InstrumentControlOptions'\n\nconst fmModeMethods = {\n  'parallel': 'setupOscillators_A',\n  'vertical': 'setupOscillators_B'\n}\n\nexport default class fmSynth extends Listener {\n  constructor(ctx){\n    super()\n    this.volume = 8\n    this.context = ctx\n    this.decay = 1\n    this.prevOsc = null\n    this.oscillators = {}\n    this.playing = false\n    this.waveformOptions = ['square', 'sine', 'sawtooth']\n    this.waveform = 'square'\n    this.fmMode = 'parallel'\n  }\n  storeOscillators(data){\n    Object.keys(data).forEach(key => {\n      this.oscillators[key] = data[key]\n    })\n  }\n  stopAll(){\n    if(!this.oscillators.osc1) return\n    this.oscillators.gainNode1.gain.setTargetAtTime(0, this.context.currentTime+(this.decay*0.01), 0.05);\n    this.oscillators.gainNode2.gain.setTargetAtTime(0, this.context.currentTime+(this.decay*0.01), 0.05);\n    this.oscillators.osc1.stop(this.context.currentTime+1)\n    this.oscillators.osc2.stop(this.context.currentTime+1)\n    this.oscillators.modulator1.stop(this.context.currentTime+1)\n    this.oscillators.modulator2.stop(this.context.currentTime+1)\n    this.oscillators.modulatorA.stop(this.context.currentTime+1)\n    this.oscillators.modulatorB.stop(this.context.currentTime+1)\n    this.oscillators = {}\n    this.playing = false\n  }\n  getModulator(oct, wave, gain){\n    const modulator = this.context.createOscillator()\n    const modulatorGain = this.context.createGain()\n    modulator.type = wave\n    modulator.frequency.value = oct\n    modulatorGain.gain.value = gain\n    modulator.connect(modulatorGain)\n    return [ modulator, modulatorGain ]\n  }\n  getOscillator(pan){\n    const osc = this.context.createOscillator()\n    osc.type = this.waveform\n\n    const gainNode = this.context.createGain()\n    gainNode.gain.value = this.volume * 0.02\n\n    const panNode = this.context.createStereoPanner()\n\n    let panValue = 0\n    if(pan === 'left') panValue = -0.7\n    if(pan === 'right') panValue = 0.7\n    panNode.pan.value = panValue\n\n    const filter = this.context.createBiquadFilter();\n    filter.type = 'lowpass';\n    filter.frequency.value = 0;\n\n    osc.connect(filter)\n    filter.connect(gainNode)\n    gainNode.connect(panNode)\n    panNode.connect(this.context.destination)\n    return [ osc, filter, gainNode ]\n  }\n  setupOscillators_A(){\n    const [ osc1, filter1, gainNode1 ] = this.getOscillator('left')\n    const [ osc2, filter2, gainNode2 ] = this.getOscillator('right')\n    const [ modulatorA, modulatorGainA ] = this.getModulator(10, 'sawtooth', 70)\n    const [ modulatorB, modulatorGainB ] = this.getModulator(10, 'sine', 90)\n    const [ modulator1, modulatorGain1 ] = this.getModulator(50, 'sawtooth', 50)\n    const [ modulator2, modulatorGain2 ] = this.getModulator(100, 'square', 30)\n    modulatorGainA.connect(modulator1.frequency)\n    modulatorGainB.connect(modulator2.frequency)\n    modulatorGain1.connect(osc1.frequency)\n    modulatorGain2.connect(osc2.frequency)\n    return [\n      osc1, osc2,\n      gainNode1, gainNode2,\n      modulatorA, modulatorB,\n      modulator1, modulator2,\n      filter1, filter2\n     ]\n  }\n  setupOscillators_B(){\n    const [ osc1, filter1, gainNode1 ] = this.getOscillator()\n    const [ osc2, filter2, gainNode2 ] = this.getOscillator()\n    const [ modulatorA, modulatorGainA ] = this.getModulator(50, 'square', 35)\n    const [ modulatorB, modulatorGainB ] = this.getModulator(10, 'sine', 50)\n    const [ modulator1, modulatorGain1 ] = this.getModulator(5, 'sine', 30)\n    const [ modulator2, modulatorGain2 ] = this.getModulator(50, 'square', 25)\n    modulatorGainA.connect(modulator1.frequency)\n    modulatorGain1.connect(modulatorB.frequency)\n    modulatorGainB.connect(osc1.frequency)\n    gainNode1.connect(osc2.frequency)\n    return [\n      osc1, osc2,\n      gainNode1, gainNode2,\n      modulatorA, modulatorB,\n      modulator1, modulator2,\n      filter1, filter2\n     ]\n  }\n  play({ step, note, hold }){\n    if(step && !hold){\n      this.stopAll()\n      const methodName = fmModeMethods[this.fmMode]\n      const [\n        osc1, osc2,\n        gainNode1, gainNode2,\n        modulatorA, modulatorB,\n        modulator1, modulator2,\n        filter1, filter2\n      ] = this[methodName](note, step)\n      this.storeOscillators({\n        osc1, osc2,\n        modulatorA, modulatorB,\n        modulator1, modulator2,\n        gainNode1, gainNode2\n      })\n      modulatorA.start()\n      modulatorB.start()\n      modulator1.start()\n      modulator2.start()\n      osc1.start()\n      osc2.start()\n      filter1.frequency.setTargetAtTime(5000, this.context.currentTime, 0.03)\n      filter2.frequency.setTargetAtTime(5000, this.context.currentTime, 0.03)\n      this.playing = true\n    }\n    if((step && this.playing) || (hold && step && this.playing)){\n      this.oscillators.osc1.detune.value = note*101\n      this.oscillators.osc1.frequency.value = step*220\n      this.oscillators.osc2.detune.value = note*99\n      this.oscillators.osc2.frequency.value = step*220\n    }\n    if(!step && this.oscillators.osc1){\n      this.stopAll()\n    }\n  }\n}\n\nexport const fmControlFunction = (state, modules, moduleMap, ctx, x, y) => {\n  const initialVolume = state.instruments.fm.volume\n  const volume = new ControlValue(ctx, x, y, 'Volume', initialVolume, 10, (value) => {\n      state.instruments.fm.setProp({ property: 'volume', value })\n  })\n  modules.push(volume)\n  moduleMap['0/0'] = volume\n  moduleMap['1/0'] = volume\n  moduleMap['2/0'] = volume\n\n  const initialDecay = state.instruments.fm.decay\n  const decay = new ControlValue(ctx, x, y+40, 'Decay', initialDecay, 9, (value) => {\n      if(value === 0) value += 1\n      state.instruments.fm.setProp({ property: 'decay', value })\n  })\n  modules.push(decay)\n  moduleMap['0/1'] = decay\n  moduleMap['1/1'] = decay\n  moduleMap['2/1'] = decay\n\n  const waveform = new ControlOptions(ctx, x+3*40, y, 'Waveform', ['square', 'sine','sawtooth'],\n  state.instruments.fm.waveform,\n  (value) => {\n    state.instruments.fm.setProp({ property: 'waveform', value })\n  })\n  modules.push(waveform)\n  moduleMap['3/0'] = waveform\n  moduleMap['4/0'] = waveform\n  moduleMap['5/0'] = waveform\n  moduleMap['6/0'] = waveform\n\n  const fmMode = new ControlOptions(ctx, x+3*40, y+40, 'FM Mode', ['vertical', 'parallel'],\n  state.instruments.fm.fmMode,\n  (value) => {\n    state.instruments.fm.setProp({ property: 'fmMode', value })\n  })\n  modules.push(fmMode)\n  moduleMap['3/1'] = fmMode\n  moduleMap['4/1'] = fmMode\n  moduleMap['5/1'] = fmMode\n  moduleMap['6/1'] = fmMode\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/fm.js","import Listener from './Listener'\nimport ControlValue from '../ui/InstrumentControlValue'\n\nexport default class Hat extends Listener {\n  constructor(ctx){\n    super()\n    this.volume = 8\n    this.context = ctx\n    this.prevOsc = null\n    this.buffer = noiseBuffer(ctx)\n  }\n  getNoise(){\n    const noise = this.context.createBufferSource();\n    noise.buffer = this.buffer\n    const noiseFilter = this.context.createBiquadFilter();\n    noiseFilter.type = 'highpass';\n    noiseFilter.frequency.value = 2500;\n    noise.connect(noiseFilter);\n\n    const noiseEnvelope = this.context.createGain();\n    noiseEnvelope.gain.value = this.volume * 0.1\n    noiseFilter.connect(noiseEnvelope);\n    noiseEnvelope.connect(this.context.destination);\n    return [ noise, noiseEnvelope ]\n  }\n  stopAll(){\n    if(this.prevOsc){\n      this.prevOsc.stop(0)\n    }\n  }\n  play({ step }){\n    if(step){\n      this.stopAll()\n      const time = step === 1 ? 0.01 : 0.05\n      const [ noise, noiseEnvelope ] = this.getNoise()\n      this.prevOsc = noise\n      noise.start(0)\n      noiseEnvelope.gain.setTargetAtTime(0, this.context.currentTime, time);\n      noise.stop(this.context.currentTime + 0.30)\n    }\n  }\n}\n\nfunction noiseBuffer(context) {\n  const bufferSize = context.sampleRate;\n  const buffer = context.createBuffer(1, bufferSize, context.sampleRate);\n  const output = buffer.getChannelData(0);\n  for (var i = 0; i < bufferSize; i++) {\n    output[i] = Math.random() * 2 - 1;\n  }\n  return buffer;\n};\n\nexport const hatControlFunction = (state, modules, moduleMap, ctx, x, y) => {\n  const initialVolume = state.instruments.hat.volume\n  const volume = new ControlValue(ctx, x, y, 'Volume', initialVolume, 10, (value) => {\n      state.instruments.hat.setProp({ property: 'volume', value })\n  })\n  modules.push(volume)\n  moduleMap['0/0'] = volume\n  moduleMap['1/0'] = volume\n  moduleMap['2/0'] = volume\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/hat.js","import Listener from './Listener'\nimport ControlValue from '../ui/InstrumentControlValue'\n\nexport default class KickSynth extends Listener {\n  constructor(ctx){\n    super()\n    this.volume = 8\n    this.context = ctx\n    this.decay = 0\n    this.attack = 9\n    this.config = {\n      type: 'sine'\n    }\n  }\n  stopAll(){}\n  getOscillators(note){\n    const osc = this.context.createOscillator()\n    const blipOsc = this.context.createOscillator()\n    const gain = this.context.createGain()\n    const blipGain = this.context.createGain()\n    gain.gain.value = this.volume * 0.1\n    blipGain.gain.value = (this.volume - (9 - this.attack)) * 0.1\n    osc.frequency.value = 55\n    blipOsc.frequency.value = 440\n    osc.detune.value = note * 100\n    blipOsc.detune.value = note * 100\n    osc.connect(gain)\n    blipOsc.connect(blipGain)\n    gain.connect(this.context.destination)\n    blipGain.connect(this.context.destination)\n    return [ osc, gain, blipOsc, blipGain ]\n  }\n  play({ step, note }){\n    const [ osc, gain, blipOsc, blipGain ] = this.getOscillators(note)\n    if(step){\n      osc.start()\n      blipOsc.start()\n      blipGain.gain.setTargetAtTime(this.volume * 0.1, this.context.currentTime, 0.01*this.attack);\n      gain.gain.setTargetAtTime(0, this.context.currentTime, 0.07 + (this.decay * 0.01));\n      blipGain.gain.setTargetAtTime(0, this.context.currentTime, 0.10);\n      blipOsc.frequency.setTargetAtTime(55, this.context.currentTime, 0.05)\n      osc.stop(this.context.currentTime+1)\n      blipOsc.stop(this.context.currentTime+1)\n    }\n  }\n}\n\nexport const kickControlFunction = (state, modules, moduleMap, ctx, x, y) => {\n  const initialVolume = state.instruments.kick.volume\n  const volume = new ControlValue(ctx, x, y, 'Volume', initialVolume, 10, (value) => {\n      state.instruments.kick.setProp({ property: 'volume', value })\n  })\n  modules.push(volume)\n  moduleMap['0/0'] = volume\n  moduleMap['1/0'] = volume\n  moduleMap['2/0'] = volume\n\n  const initialAttack = state.instruments.kick.attack\n  const attack = new ControlValue(ctx, x, y+40, 'Attack', initialAttack, 10, (value) => {\n      state.instruments.kick.setProp({ property: 'attack', value })\n  })\n  modules.push(attack)\n  moduleMap['0/1'] = attack\n  moduleMap['1/1'] = attack\n  moduleMap['2/1'] = attack\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/kick.js","import Listener from './Listener'\nimport ControlValue from '../ui/InstrumentControlValue'\n\nexport default class LeadSynth extends Listener {\n  constructor(ctx){\n    super()\n    this.volume = 8\n    this.context = ctx\n    this.previousTone = 0\n    this.previousOct = 1\n    this.decay = 0\n    this.prevOsc = null\n    this.playing = false\n    this.waveform = 'sine'\n  }\n  stopAll(){\n    if(!this.prevOsc) return\n    this.prevGainNode.gain.setTargetAtTime(0, this.context.currentTime+0.1+(this.decay*0.02), 0.05);\n    this.prevOsc.stop(this.context.currentTime+1)\n    this.prevOsc = null\n    this.playing = false\n  }\n  getOscillators(note, oct){\n  this.previousTone = note\n  this.previousOct = oct\n\n  const osc = this.context.createOscillator()\n  osc.detune.value = this.previousTone * 100\n  osc.frequency.value = this.previousOct * 220\n  osc.type = this.waveform\n\n  const gainNode = this.context.createGain()\n  gainNode.gain.value = 0\n\n  const filter = this.context.createBiquadFilter();\n  // filter.type = 'lowpass'\n  filter.frequency.value = 2500\n\n  osc.connect(filter)\n  filter.connect(gainNode)\n  gainNode.connect(this.context.destination)\n\n  return [ osc, gainNode, filter ]\n  }\n  play({ step, note, hold }){\n    if(step && !hold){\n      this.stopAll()\n      const [ osc, gainNode, filter ] = this.getOscillators(note, step)\n      this.prevOsc = osc\n      this.prevGainNode = gainNode\n      osc.start()\n      gainNode.gain.setTargetAtTime(this.volume*0.1, this.context.currentTime+0.01, 0.02);\n      filter.frequency.setTargetAtTime(500, this.context.currentTime+0.1, 0.03)\n      this.playing = true\n    }\n    if((step && this.playing) || (hold && step && this.playing)){\n      this.prevOsc.detune.setTargetAtTime(note*100, this.context.currentTime, 0.03)\n      this.prevOsc.frequency.setTargetAtTime(step*440, this.context.currentTime, 0.03)\n    }\n    if(!step && this.prevOsc){\n      this.stopAll()\n    }\n\n  }\n}\n\nexport const leadControlFunction = (state, modules, moduleMap, ctx, x, y) => {\n  const initialVolume = state.instruments.lead.volume\n  const volume = new ControlValue(ctx, x, y, 'Volume', initialVolume, 10, (value) => {\n      state.instruments.lead.setProp({ property: 'volume', value })\n  })\n  modules.push(volume)\n  moduleMap['0/0'] = volume\n  moduleMap['1/0'] = volume\n  moduleMap['2/0'] = volume\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/leadSynth.js","import Listener from './Listener'\nimport ControlValue from '../ui/InstrumentControlValue'\n\nexport default class Snare extends Listener {\n  constructor(ctx){\n    super()\n    this.volume = 8\n    this.context = ctx\n    this.config = {\n      type: 'triangle'\n    }\n    this.buffer = noiseBuffer(ctx)\n  }\n  setVolume(value){\n    this.volume = value\n  }\n  stopAll(){}\n  getNoise(){\n    const noise = this.context.createBufferSource();\n    noise.buffer = this.buffer\n\n    const noiseFilter = this.context.createBiquadFilter();\n    noiseFilter.type = 'highpass';\n    noiseFilter.frequency.value = 1000;\n\n    const noiseEnvelope = this.context.createGain();\n    noiseEnvelope.gain.value = this.volume * 0.1\n\n    noise.connect(noiseFilter);\n    noiseFilter.connect(noiseEnvelope);\n    noiseEnvelope.connect(this.context.destination);\n    return [ noise, noiseEnvelope ]\n  }\n  getOscillators(){\n  const osc = this.context.createOscillator();\n  osc.type = this.config.type;\n  osc.frequency.value = 150\n\n  const gain = this.context.createGain()\n  gain.gain.value = this.volume * 0.1\n  osc.connect(gain);\n  gain.connect(this.context.destination);\n  return [ osc, gain ]\n  }\n  play({ step }){\n    if(step){\n      const [ osc, gain ] = this.getOscillators()\n      const [ noise, noiseEnvelope ] = this.getNoise()\n      osc.start()\n      noise.start()\n      gain.gain.setTargetAtTime(0, this.context.currentTime, 0.04);\n      noiseEnvelope.gain.setTargetAtTime(0, this.context.currentTime, 0.03);\n      osc.stop(this.context.currentTime + 0.30)\n      noise.stop(this.context.currentTime + 0.30)\n    }\n  }\n}\n\nfunction noiseBuffer(context) {\n  const bufferSize = context.sampleRate;\n  const buffer = context.createBuffer(1, bufferSize, context.sampleRate);\n  const output = buffer.getChannelData(0);\n  for (var i = 0; i < bufferSize; i++) {\n    output[i] = Math.random() * 2 - 1;\n  }\n  return buffer;\n};\n\nexport const snareControlFunction = (state, modules, moduleMap, ctx, x, y) => {\n  const initialVolume = state.instruments.snare.volume\n  const volume = new ControlValue(ctx, x, y, 'Volume', initialVolume, 10, (value) => {\n      state.instruments.snare.setProp({ property: 'volume', value })\n  })\n  modules.push(volume)\n  moduleMap['0/0'] = volume\n  moduleMap['1/0'] = volume\n  moduleMap['2/0'] = volume\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/snare.js","import KickSynth from './instruments/kick'\nimport LeadSynth from './instruments/leadSynth'\nimport BassSynth from './instruments/synth'\nimport fm from './instruments/fm'\nimport Snare from './instruments/snare'\nimport Hat from './instruments/hat'\nimport { LOOP_LENGTH } from './constants'\n\nfunction makeStepArray(steps){\n  let empty = []\n  empty.length = steps\n  empty.fill(undefined)\n  let arr = empty.map(item => ({ step: 0, note: 0, hold: false }))\n  return arr\n}\n\nexport default class State {\n  constructor(audioCtx) {\n    this.swingIsOn = false\n    this.isPlaying = false\n    this.tempo = 120\n    this.page = 0\n    this.blocks = {}\n    this.blinkers = []\n    this.children = []\n    this.steps = {\n      bass: [makeStepArray(16),makeStepArray(16), makeStepArray(16), makeStepArray(16)],\n      kick: [makeStepArray(16),makeStepArray(16), makeStepArray(16), makeStepArray(16)],\n      snare: [makeStepArray(16),makeStepArray(16), makeStepArray(16), makeStepArray(16)],\n      lead: [makeStepArray(16),makeStepArray(16), makeStepArray(16), makeStepArray(16)],\n      fm: [makeStepArray(16),makeStepArray(16), makeStepArray(16), makeStepArray(16)],\n      hat: [makeStepArray(16),makeStepArray(16), makeStepArray(16), makeStepArray(16)]\n    }\n    this.copyBuffer = { notes: {}, steps: {} }\n    this.step = 0\n    this.context = audioCtx\n    this.instruments = {\n      bass: new BassSynth(audioCtx),\n      kick: new KickSynth(audioCtx),\n      snare: new Snare(audioCtx),\n      fm: new fm(audioCtx),\n      lead: new LeadSynth(audioCtx),\n      hat: new Hat(audioCtx)\n    }\n  }\n  push(child){\n    this.children.push(child)\n    return child\n  }\n  trigger(message){\n    switch (message.type) {\n      case 'get_page': return this.steps[message.instrument][this.page]\n      case 'toggle_swing': return this.swingIsOn = !this.swingIsOn\n      case 'set_page':\n        this.page = message.page\n        this.drawScreen()\n        return message.page\n      case 'copy_page': return this.copyPage()\n      case 'paste_page': return this.pastePage()\n    }\n  }\n  toggleStep(idx, type, values){\n    this.steps[type][this.page][idx].step = (this.steps[type][this.page][idx].step + 1) % values\n  }\n  togglePlay(){\n    this.isPlaying = !this.isPlaying\n\n    if(this.isPlaying){\n      this.noteTime = 0.0\n      this.startTime = this.context.currentTime + 0.005\n      this.rhythmIndex = 0\n      this.previousRhythmIndex = null\n      this.schedule()\n    } else {\n      this.stop()\n    }\n  }\n  copyPage(){\n    Object.keys(this.steps).forEach(stepKey => {\n      this.copyBuffer.steps[stepKey] = this.steps[stepKey][this.page].slice().map(step => Object.assign({}, step))\n    })\n  }\n  pastePage(){\n    Object.keys(this.steps).forEach(stepKey => {\n      this.steps[stepKey][this.page] = this.copyBuffer.steps[stepKey].slice()\n    })\n    this.refreshScreen()\n  }\n  schedule(){\n    let currentTime = this.context.currentTime\n    currentTime -= this.startTime\n\n    while (this.noteTime < currentTime + 0.200) {\n      var contextPlayTime = this.noteTime + this.startTime\n      this.blinkers[this.rhythmIndex].toggle()\n      if(this.previousRhythmIndex !== null) this.blinkers[this.previousRhythmIndex].toggle(false)\n      /* for each instrument pass the step object for this page and beat into the play method */\n      Object.keys(this.steps).forEach(type => {\n        this.instruments[type].play(this.steps[type][this.page][this.rhythmIndex])\n      })\n      this.advanceNote()\n    }\n    this.interval = setTimeout(() => { this.schedule() }, 0)\n  }\n  advanceNote(){\n    let secondsPerBeat = 60 / this.tempo\n    this.previousRhythmIndex = this.rhythmIndex\n    this.rhythmIndex++;\n    if (this.rhythmIndex === LOOP_LENGTH) {\n      this.rhythmIndex = 0;\n    }\n\n    if(this.swingIsOn){\n      this.noteTime += this.rhythmIndex % 2 ? 0.32 * secondsPerBeat : 0.18 * secondsPerBeat\n    } else {\n      this.noteTime += 0.25 * secondsPerBeat\n    }\n  }\n  stop(){\n    Object.keys(this.instruments).forEach(key => {\n      this.instruments[key].stopAll()\n    })\n    this.blinkers[this.previousRhythmIndex].toggle()\n    window.clearInterval(this.interval)\n  }\n  drawScreen(){\n    this.children.forEach(child => child.render())\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/state.js","export default class BeatMarker {\n  constructor(ctx, x, y){\n    this.context = ctx\n    this.x = x\n    this.y = y\n  }\n  render(){\n    this.context.fillStyle = 'red'\n    this.context.fillRect(this.x, this.y, 40, 40)\n    this.context.clearRect(this.x, this.y, 30, 30)\n  }\n  handleClick(){}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/BeatMarker.js","export default class Button {\n  constructor(text, ctx, x, y, handleClick){\n    this.x = x\n    this.y = y\n    this.text = text\n    this.textWidth = Math.ceil(ctx.measureText(text).width)\n    this.width = Math.ceil((this.textWidth+10)/40) * 40\n    this.toggled = false\n    this.context = ctx\n    this.callBack = handleClick\n  }\n  handleClick(x, y){\n    this.toggled = !this.toggled\n    this.callBack(this.toggled)\n    this.render()\n  }\n  render(){\n    this.context.clearRect(this.x, this.y, this.width, 40)\n    this.context.fillStyle = 'black'\n      this.context.fillRect(this.x, this.y, this.width, 40)\n      if(this.isToggled ? this.isToggled() : this.toggled){\n        this.context.fillStyle = '#999'\n        this.context.fillRect(this.x+1, this.y, this.width-2, 39)\n      } else {\n        this.context.clearRect(this.x+1, this.y+1, this.width-2, 39)\n      }\n      this.context.fillStyle = 'black'\n      const wordMargin = (this.width/2)-(this.textWidth/2)\n      this.context.fillText(this.text, this.x+wordMargin, this.y+25, this.width+3);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Button.js","import BassSynth from '../instruments/synth'\nimport { BinSwitch, OctaveSwitch } from './switch'\nimport Blinker from './Blinker'\nimport Note from './note'\nimport instrumentControlFunctions from '../instruments/instrumentControlFunctions'\n\nexport default class InstrumentWindow {\n  constructor(state, ctx, x, y){\n    this.x = x\n    this.y = y\n    this.parent = state\n    this.context = ctx\n    this.instrument = 'bass'\n    this.instrumentControlMap = {}\n    this.moduleMap = {}\n    this.children = []\n    this.instrumentControls = []\n    this.build()\n  }\n  push(child){\n    this.children.push(child)\n    return child\n  }\n  build(){\n    for(var i = 0; i < 16; i++){\n      this.moduleMap[`${i}/9`] = this.push(new Note(i, this, this.context, this.x+i*40, this.y+9*40))\n      this.moduleMap[`${i}/10`] = this.push(new OctaveSwitch(i, this, this.context, this.x+i*40, this.y+10*40))\n      this.moduleMap[`${i}/11`] = this.push(new Blinker(i, this.parent, this.context, this.x+i*40, this.y+11*40))\n    }\n    this.buildInstrumentControls()\n  }\n  buildInstrumentControls(){\n    instrumentControlFunctions[this.instrument](this.parent, this.instrumentControls, this.instrumentControlMap, this.context, this.x+10, this.y+10)\n  }\n  trigger(message){\n    return this.parent.trigger(message)\n  }\n  setInstrument(instrument){\n    this.instrument = instrument\n    this.instrumentControls = []\n    this.instrumentControlMap = {}\n    this.build()\n    this.parent.drawScreen()\n  }\n  getPage(){\n    return this.trigger({ type: 'get_page', instrument: this.instrument })\n  }\n  renderChildren(){\n    this.children.forEach(child => child.render())\n    this.instrumentControls.forEach(child => child.render())\n  }\n  render(){\n    this.context.fillRect(this.x, this.y, 640, 480)\n    this.context.clearRect(this.x+1, this.y+1, 638, 478)\n    this.renderChildren()\n  }\n  handleClick(x, y, innerX, innerY){\n    let xCell = x - (this.x/40)\n    let yCell = y - (this.y/40)\n    let key = `${xCell}/${yCell}`\n    let module = this.moduleMap[key] || this.instrumentControlMap[key]\n    if(module) module.handleClick(x, y, innerX, innerY)\n  }\n}\n\n/*\n    0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16\n0   . . . . . . . . . . .  .  .  .  .  .  .\n1   . . . . . . . . . . .  .  .  .  .  .  .\n2   . . . . . . . . . . .  .  .  .  .  .  .\n3   . . . . . . . . . . .  .  .  .  .  .  .\n4   . . . . . . . . . . .  .  .  .  .  .  .\n5   . . . . . . . . . . .  .  .  .  .  .  .\n6   . . . . . . . . . . .  .  .  .  .  .  .\n7   . . . . . . . . . . .  .  .  .  .  .  .\n8   . . . . . . . . . . .  .  .  .  .  .  .\n9   . . . . . . . . . . .  .  .  .  .  .  .\n10  . . . . . . . . . . .  .  .  .  .  .  .\n11  . . . . . . . . . . .  .  .  .  .  .  .\n*/\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/InstrumentWindow.js","export default class PageButton {\n  constructor(state, ctx, x, y, handleClick){\n    this.context = ctx\n    this.state = state\n    this.pageOne = x/40\n    this.x = x\n    this.y = y\n    this.value = 0\n    this.callBack = handleClick\n  }\n  handleClick(x, y){\n    const buttonIdx = x - this.pageOne\n    this.value = buttonIdx\n    this.state.trigger({ type: 'set_page', page: this.value })\n    this.render()\n  }\n  render(){\n    this.value = this.state.page // reset page btn to top level page value\n    this.context.clearRect(this.x, this.y, 40, 160)\n    this.context.fillStyle = 'black'\n    for(let i = 0; i < 4; i++){\n      const offset = 40 * i\n      const name = `Pg ${i+1}`\n      this.context.fillRect(this.x+offset, this.y, 40, 40)\n      if(i === this.value){\n        this.context.fillStyle = '#999'\n        this.context.fillRect(this.x+offset+1, this.y, 39-(i === 3 ? 1 : 0), 39)\n      } else {\n        this.context.clearRect(this.x+offset+1, this.y, 39-(i === 3 ? 1 : 0), 39)\n      }\n      this.context.fillStyle = 'black'\n      this.context.fillText(name, this.x+offset+3, this.y+25, 80);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/PageButton.js","export default class PlayBtn {\n  constructor(ctx, state, x, y){\n    this.context = ctx\n    this.state = state\n    this.x = x\n    this.y = y\n    this.on = state.isPlaying\n  }\n  render(){\n    this.on = this.state.isPlaying\n    this.context.fillStyle = this.on ? 'red' : 'green'\n    this.context.fillRect(this.x, this.y, 40, 40)\n    this.context.fillStyle = this.on ? 'black' : 'white'\n    this.context.fillText(this.on ? 'STOP' : 'PLAY', this.x+1, this.y+25, 80);\n  }\n  handleClick(){\n    this.state.togglePlay()\n    this.on = this.state.isPlaying\n    this.render()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/PlayBtn.js","export default class PlayBtn {\n  constructor(state, ctx, x, y){\n    this.context = ctx\n    this.state = state\n    this.x = x\n    this.y = y\n  }\n  render(){\n    const tempoText = `${this.state.tempo}/bpms`\n    this.context.fillStyle = 'black'\n    this.context.clearRect(this.x, this.y, 65, 40)\n    this.context.fillText('+', this.x+25, this.y+10, 80);\n    this.context.fillText('-', this.x+26, this.y+40, 80);\n    this.context.fillText(tempoText, this.x, this.y+25, 80);\n  }\n  handleClick(x, y, innerX, innerY){\n    const section = Math.floor(innerY/20)\n    this.state.tempo = section ? this.state.tempo-1 : this.state.tempo+1\n    this.render()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Tempo.js","export default class Word {\n  constructor(word, ctx, x, y, handleClick){\n    this.context = ctx\n    this.word = word\n    this.x = x\n    this.y = y\n    this.handleClick = handleClick || function(){}\n  }\n  render(){\n    this.context.clearRect(this.x, this.y, 40, 40)\n    this.context.fillStyle = 'green'\n    this.context.fillText(this.word, this.x+3, this.y+25, 80);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Word.js","import { bassControlFunction } from './synth'\nimport { leadControlFunction } from './leadSynth'\nimport { fmControlFunction } from './fm'\nimport { kickControlFunction } from './kick'\nimport { hatControlFunction } from './hat'\nimport { snareControlFunction } from './snare'\n\nconst map = {\n  'bass': bassControlFunction,\n  'lead': leadControlFunction,\n  'fm': fmControlFunction,\n  'kick': kickControlFunction,\n  'hat': hatControlFunction,\n  'snare': snareControlFunction\n}\n\nexport default map\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/instrumentControlFunctions.js","import State from './state'\nimport PlayBtn from './ui/PlayBtn'\nimport BeatMarker from './ui/BeatMarker'\nimport Word from './ui/Word'\nimport Options from './ui/Options'\nimport PageButton from './ui/PageButton'\nimport Tempo from './ui/Tempo'\nimport Button from './ui/Button'\nimport InstrumentWindow from './ui/InstrumentWindow'\n\nconst canvas = document.getElementById('synth');\nconst ctx = canvas.getContext('2d');\nctx.font = '14px sans-serif'\nconst audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n\nconst state = new State(audioCtx)\n\n/* Play button */\nconst playBtn = state.push(new PlayBtn(ctx, state, 0, 0))\nstate.blocks['0/0'] = playBtn\n\n\n/* Page controls */\nconst pageButton = state.push(new PageButton(state, ctx, 2*40, 0))\nstate.blocks['2/0'] = pageButton\nstate.blocks['3/0'] = pageButton\nstate.blocks['4/0'] = pageButton\nstate.blocks['5/0'] = pageButton\n\nstate.blocks['7/0'] = state.push(new Word('Copy', ctx, 7*40, 0, () => state.trigger({ type: 'copy_page'})))\nstate.blocks['8/0'] = state.push(new Word('Paste', ctx, 8*40, 0, () => state.trigger({ type: 'paste_page'})))\n/* Tempo */\nconst tempo = state.push(new Tempo(state, ctx, 11*40, 0))\nstate.blocks['11/0'] = tempo\nstate.blocks['12/0'] = tempo\n\nconst toggleSwing = () => state.trigger({ type: 'toggle_swing' })\nconst swingToggle = state.push(new Options({ options: ['straight', 'swing'], cb: toggleSwing, ctx, x: 14*40, y: 0 }))\nstate.blocks['14/0'] = swingToggle\nstate.blocks['15/0'] = swingToggle\n\nconst instrumentWindow = state.push(new InstrumentWindow(state, ctx, 4*40, 3*40))\nfor(let i = 4; i < 20; i++){\n  for(let k = 3; k < 16; k++){\n    state.blocks[`${i}/${k}`] = instrumentWindow\n  }\n}\n\nconst instruments = ['fm', 'bass','lead', 'kick', 'snare', 'hat']\nlet startX = 4*40\n\nfor(let i = 0; i < instruments.length; i++){\n  let btn = new Button(instruments[i], ctx, startX, 80, (on) => {\n    instrumentWindow.setInstrument(instruments[i])\n  })\n  btn.isToggled = () => instrumentWindow.instrument === instruments[i]\n  state.push(btn)\n  for(let k = 0; k <= Math.floor(btn.width/40); k++){\n    state.blocks[`${Math.ceil(startX/40) + k}/2`] = btn\n  }\n  startX = startX + btn.width\n}\n\ncanvas.onclick = function (e) {\n  let totalOffsetX = 0;\n  let totalOffsetY = 0;\n  let canvasX = 0;\n  let canvasY = 0;\n  let currentElement = this;\n  do {\n    totalOffsetX += currentElement.offsetLeft - currentElement.scrollLeft\n    totalOffsetY += currentElement.offsetTop - currentElement.scrollTop\n  } while(currentElement = currentElement.offsetParent)\n  canvasX = e.pageX - totalOffsetX - window.scrollX;\n  canvasY = e.pageY - totalOffsetY - window.scrollY;\n\n  let x = Math.floor(canvasX/40)\n  let y = Math.floor(canvasY/40)\n  let innerX = canvasX - (x * 40)\n  let innerY = canvasY - (y * 40)\n  const key = `${x}/${y}`\n  const module = state.blocks[key]\n  if(module){\n    state.blocks[key].handleClick(x, y, innerX, innerY)\n  }\n}\n\nconst pageKeys = ['Digit1', 'Digit2', 'Digit3', 'Digit4']\n\nwindow.onkeydown = function(e){\n  if(e.code){\n    if(e.code === 'Space'){\n      state.togglePlay()\n      playBtn.render()\n    } else if(pageKeys.indexOf(e.code) !== -1){\n      const page = parseInt(e.code.split('Digit')[1]) - 1\n      state.trigger({ type: 'set_page', page })\n    } else if(e.code === 'BracketLeft' || e.code === 'BracketRight'){\n      const instrumentIdx = instruments.indexOf(instrumentWindow.instrument)\n      let nextInstrumentIdx = e.code === 'BracketLeft' ? instrumentIdx -1 : instrumentIdx + 1\n      nextInstrumentIdx = nextInstrumentIdx % instruments.length\n      instrumentWindow.setInstrument(instruments[nextInstrumentIdx])\n    }\n  }\n}\n\nstate.drawScreen()\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","export default class Blinker {\n  constructor(i, state, ctx, x, y){\n    this.context = ctx\n    state.blinkers[i] = this\n    this.idx = i\n    this.on = false\n    this.x = x\n    this.y = y\n  }\n  render(){\n    if(this.on || this.idx % 4 === 0){\n      this.drawCircle()\n    } else {\n      this.context.clearRect(this.x-1, this.y-1, 39, 39)\n    }\n  }\n  drawCircle(){\n    this.context.beginPath();\n    this.context.arc(this.x+20, this.y+20, 8, 0, 2 * Math.PI, false);\n    this.context.fillStyle = this.idx % 4 ? 'red' : 'blue';\n    this.context.fill();\n    this.context.lineWidth = 1;\n    this.context.strokeStyle = '#003300';\n    this.context.stroke();\n  }\n  handleClick(){}\n  toggle(value){\n    this.on = value !== undefined ? value : !this.on\n    this.render()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Blinker.js","import Options from './Options'\n\nexport default class ControlOptions {\n  constructor(ctx, x, y, text, options, currentValue, cb){\n    this.context = ctx\n    this.x = x\n    this.y = y\n    this.text = text\n    this.valueInput = new Options({\n      options, currentValue, cb, ctx, x: x+80, y\n    })\n  }\n  handleClick(x, y, innerX, innerY){\n    this.valueInput.handleClick(x, y, innerX, innerY)\n  }\n  render(){\n    this.context.fillStyle = 'black'\n    this.context.fillRect(this.x, this.y, 120, 40)\n    this.context.clearRect(this.x+1, this.y+1, 118, 38)\n    this.context.fillText(this.text, this.x+5, this.y+25, 80);\n    this.valueInput.render()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/InstrumentControlOptions.js","export default class ValueInput {\n  constructor({ ctx, x, y, initialValue, maxValue, cb }){\n    this.context = ctx\n    this.value = initialValue\n    this.maxValue = maxValue\n    this.x = x\n    this.y = y\n    this.callback = cb\n  }\n  render(){\n    this.context.fillStyle = 'black'\n    this.context.fillRect(this.x, this.y, 40, 40)\n    this.context.clearRect(this.x+1, this.y+1, 38, 38)\n    this.context.fillText('+', this.x+20, this.y+13, 40)\n    this.context.fillText('-', this.x+21, this.y+37, 40)\n    this.context.fillText(this.value, this.x+5, this.y+25, 40)\n  }\n  handleClick(x, y, innerX, innerY){\n    const section = Math.floor(innerY/20)\n    this.value = Math.abs((section ? this.value-1 : this.value+1) % this.maxValue)\n    this.callback(this.value)\n    this.render()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ValueInput.js","export default class Note {\n  constructor(idx, parent, context, x, y){\n    this.notes = ['c','c#','d','d#','e','f','f#','g','g#','a','a#','b'],\n    this.parent = parent\n    this.context = context\n    this.idx = idx\n    this.x = x\n    this.y = y\n  }\n  render(){\n    this.context.fillStyle = 'black'\n    this.context.fillRect(this.x, this.y, 40, 40)\n    this.context.clearRect(this.x+1, this.y+1, 38, 38)\n    const page = this.parent.getPage()\n    const noteIndex = page[this.idx].note\n    this.context.fillText(this.notes[noteIndex], this.x+15, this.y+25, 15);\n  }\n  handleClick(){\n    const page = this.parent.getPage()\n    page[this.idx].note = page[this.idx].note === 11 ? 0 : page[this.idx].note+1\n    this.render()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/note.js","import { COLOR } from '../constants'\n\nexport class BinSwitch {\n  constructor(idx, state, ctx){\n    this.idx = idx\n    this.state = state\n    this.context = ctx\n    this.x = null\n    this.y = null\n    this.colors = ['black', 'red']\n  }\n  render(){\n    const page = this.state.getPage()\n    this.context.fillStyle = this.colors[page[this.idx].step]\n    this.context.fillRect(this.x, this.y, 39, 39)\n    this.context.fillStyle = COLOR\n  }\n  setPos(x, y){\n    this.x = x\n    this.y = y\n  }\n  handleClick(){\n    const page = this.state.getPage()\n    this.value = (this.value+1) % 2\n    page[this.idx].step = this.value\n    this.context.clearRect(this.x, this.y, 39, 39)\n    this.context.fillStyle = this.colors[page[this.idx].step]\n    this.context.fillRect(this.x, this.y, 39, 39)\n    this.context.fillStyle = COLOR\n  }\n}\n\nexport class OctaveSwitch {\n  constructor(idx, state, ctx, x, y){\n    this.idx = idx\n    this.state = state\n    this.context = ctx\n    this.x = x\n    this.y = y\n    this.colors = ['black', 'red', 'blue']\n  }\n  render(){\n    const page = this.state.getPage()\n    this.context.fillStyle = this.colors[page[this.idx].step]\n    this.context.fillRect(this.x, this.y, 39, 39)\n    this.context.fillStyle = page[this.idx].hold ? 'green' : 'yellow'\n    this.context.fillRect(this.x, this.y, 10, 10)\n    this.context.fillStyle = COLOR\n  }\n  handleClick(x, y, innerX, innerY){\n    const isHold = innerX <= 10 && innerY <= 10\n    const page = this.state.getPage()\n    if(isHold){\n      page[this.idx].hold = !page[this.idx].hold\n    } else {\n      this.value = (page[this.idx].step+1) % 3\n      page[this.idx].step = this.value\n    }\n    this.context.clearRect(this.x, this.y, 39, 39)\n    this.render()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/switch.js"],"sourceRoot":""}