{"version":3,"sources":["webpack:///webpack/bootstrap 0a29117c432b00bb467f","webpack:///./src/instruments/Listener.js","webpack:///./src/ui/InstrumentControlValue.js","webpack:///./src/instruments/synth.js","webpack:///./src/ui/InstrumentControlOptions.js","webpack:///./src/ui/Options.js","webpack:///./src/constants.js","webpack:///./src/instruments/fm.js","webpack:///./src/instruments/hat.js","webpack:///./src/instruments/kick.js","webpack:///./src/instruments/leadSynth.js","webpack:///./src/instruments/snare.js","webpack:///./src/state.js","webpack:///./src/ui/BeatMarker.js","webpack:///./src/ui/Button.js","webpack:///./src/ui/InstrumentWindow.js","webpack:///./src/ui/PageButton.js","webpack:///./src/ui/PlayBtn.js","webpack:///./src/ui/SequenceList.js","webpack:///./src/ui/Tempo.js","webpack:///./src/ui/Word.js","webpack:///./src/instruments/instrumentControlFunctions.js","webpack:///./src/main.js","webpack:///./src/ui/Blinker.js","webpack:///./src/ui/ValueInput.js","webpack:///./src/ui/note.js","webpack:///./src/ui/switch.js"],"names":["Listener","setProp","action","Array","isArray","property","value","ControlValue","constructor","ctx","x","y","text","initialValue","maxValue","cb","context","valueInput","ValueInput","handleClick","innerX","innerY","render","fillStyle","fillRect","clearRect","fillText","KeySynth","name","volume","oscillators","filterValue","waveform","playing","stopAll","osc1","gain","setTargetAtTime","currentTime","stop","osc2","osc3","makeOscillator","osc","createOscillator","type","getOscillators","note","oct","createGain","filters","createBiquadFilter","frequency","connect","forEach","g","destination","play","step","hold","start","detune","bassControlFunction","state","modules","moduleMap","initialVolume","instruments","bass","push","initialFilter","filter","ControlOptions","options","currentValue","Options","idx","undefined","indexOf","callBack","textWidth","Math","ceil","measureText","width","offset","length","COLOR","LOOP_LENGTH","SEQUENCE_LENGTH","fmModeMethods","fmSynth","mod1Oct","mod2Oct","decay","prevOsc","waveformOptions","fmMode","storeOscillators","data","Object","keys","key","gainNode1","gainNode2","modulator1","modulator2","modulatorA","modulatorB","getModulator","wave","modulator","modulatorGain","getOscillator","pan","gainNode","panNode","createStereoPanner","panValue","setupOscillators_A","filter1","filter2","modulatorGainA","modulatorGainB","modulatorGain1","modulatorGain2","setupOscillators_B","methodName","fmControlFunction","fm","initialDecay","initialMod1Oct","initialMod2Oct","Hat","tone","buffer","noiseBuffer","getNoise","noise","createBufferSource","noiseFilter","noiseEnvelope","time","bufferSize","sampleRate","createBuffer","output","getChannelData","i","random","hatControlFunction","hat","initialTone","KickSynth","attack","config","blipOsc","blipGain","kickControlFunction","kick","initialAttack","LeadSynth","previousTone","previousOct","initialFrequency","filterType","Q","octave","prevGainNode","leadControlFunction","lead","waveform1","waveform2","octave1","octave2","initialFrequencyValue","initialQ","controlQ","Snare","setVolume","snareControlFunction","snare","makeStepArray","steps","empty","fill","arr","map","item","State","audioCtx","swingIsOn","isPlaying","tempo","viewPage","playPage","sequenceIndex","sequence","blocks","blinkers","children","copyBuffer","notes","BassSynth","child","trigger","message","instrument","page","drawScreen","copyPage","pastePage","setSequence","toggleStep","values","togglePlay","resume","then","noteTime","startTime","rhythmIndex","previousRhythmIndex","schedule","stepKey","slice","assign","nextTime","contextPlayTime","toggle","advanceNote","interval","setTimeout","secondsPerBeat","window","clearInterval","suspend","BeatMarker","Button","toggled","isToggled","wordMargin","InstrumentWindow","parent","instrumentControlMap","instrumentControls","build","Note","OctaveSwitch","Blinker","buildInstrumentControls","instrumentControlFunctions","setInstrument","getPage","renderChildren","xCell","yCell","module","PageButton","pageOne","buttonIdx","PlayBtn","on","SequenceList","beginPath","arc","PI","tempoText","section","floor","Word","word","canvas","document","getElementById","getContext","font","AudioContext","webkitAudioContext","playBtn","pageButton","sequenceControl","Tempo","toggleSwing","swingToggle","instrumentWindow","k","startX","btn","onclick","e","totalOffsetX","totalOffsetY","canvasX","canvasY","currentElement","offsetLeft","scrollLeft","offsetTop","scrollTop","offsetParent","pageX","scrollX","pageY","scrollY","pageKeys","onkeydown","code","parseInt","split","instrumentIdx","drawCircle","lineWidth","strokeStyle","stroke","callback","abs","noteIndex","BinSwitch","colors","setPos","isHold"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 21);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0a29117c432b00bb467f","export default class Listener {\n  setProp(action){\n    if(Array.isArray(action.property)){\n      // flimsy, just for setting array indexes of properties\n      this[action.property[0]][action.property[1]] = action.value\n    } else {\n      this[action.property] = action.value\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/Listener.js","import ValueInput from './ValueInput'\n\nexport default class ControlValue {\n  constructor(ctx, x, y, text, initialValue, maxValue, cb){\n    this.context = ctx\n    this.x = x\n    this.y = y\n    this.text = text\n    this.valueInput = new ValueInput({\n      ctx, x: x+80, y, initialValue, maxValue, cb\n    })\n  }\n  handleClick(x, y, innerX, innerY){\n    this.valueInput.handleClick(x, y, innerX, innerY)\n  }\n  render(){\n    this.context.fillStyle = 'black'\n    this.context.fillRect(this.x, this.y, 120, 40)\n    this.context.clearRect(this.x+1, this.y+1, 118, 38)\n    this.context.fillText(this.text, this.x+5, this.y+25, 80);\n    this.valueInput.render()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/InstrumentControlValue.js","import Listener from './Listener'\nimport ControlValue from '../ui/InstrumentControlValue'\nimport ControlOptions from '../ui/InstrumentControlOptions'\n\nexport default class KeySynth extends Listener {\n  constructor(ctx){\n    super()\n    this.name = 'bass'\n    this.volume = 8\n    this.context = ctx\n    this.oscillators = {}\n    this.filterValue = 1\n    this.waveform = 'sawtooth'\n    this.playing = false\n  }\n  stopAll(){\n    if(!this.oscillators.osc1) return\n    this.oscillators.gain[0].gain.setTargetAtTime(0, this.context.currentTime+0.05, 0.1)\n    this.oscillators.gain[1].gain.setTargetAtTime(0, this.context.currentTime+0.05, 0.1)\n    this.oscillators.gain[2].gain.setTargetAtTime(0, this.context.currentTime+0.05, 0.1)\n    this.oscillators.osc1.stop(this.context.currentTime+1)\n    this.oscillators.osc2.stop(this.context.currentTime+1)\n    this.oscillators.osc3.stop(this.context.currentTime+1)\n    this.oscillators = {}\n    this.playing = false\n  }\n  makeOscillator(waveform){\n    const osc = this.context.createOscillator()\n    osc.type = waveform\n    return osc\n  }\n  getOscillators(note, oct){\n    const osc1 = this.makeOscillator('triangle')\n    const osc2 = this.makeOscillator(this.waveform)\n    const osc3 = this.makeOscillator(this.waveform)\n    const gain = [\n      this.context.createGain(), this.context.createGain(), this.context.createGain()\n    ]\n    const filters = [\n      this.context.createBiquadFilter(), this.context.createBiquadFilter()\n    ]\n    filters[0].frequency.value = this.filterValue * 500\n    filters[1].frequency.value = this.filterValue * 500\n\n    osc1.connect(gain[0])\n    osc2.connect(filters[0])\n    osc3.connect(filters[1])\n    filters[0].connect(gain[1])\n    filters[1].connect(gain[2])\n    gain.forEach(g => {\n      g.gain.value = (this.volume * 0.1) - (this.filterValue * 0.05)\n      g.connect(this.context.destination)\n    })\n\n    return [ osc1, osc2, osc3, gain, filters ]\n  }\n  play({ step, note, hold }){\n    if(step && !hold){\n      this.stopAll()\n      let [ osc1, osc2, osc3, gain, filters ] = this.getOscillators(note, step)\n      this.oscillators = {\n        osc1, osc2, osc3,\n        gain, filters\n      }\n      filters[0].frequency.setTargetAtTime(0, this.context.currentTime+0.02, 0.2)\n      filters[1].frequency.setTargetAtTime(0, this.context.currentTime+0.02, 0.2)\n      osc1.start()\n      osc2.start()\n      osc3.start()\n      this.playing = true\n    }\n    if((step && this.playing) || (hold && step && this.playing && this.oscillators.osc1)){\n      this.oscillators.osc1.frequency.value = 55 * step\n      this.oscillators.osc2.frequency.value = 55 * step\n      this.oscillators.osc3.frequency.value = 110 * step\n      this.oscillators.osc1.detune.value = 99  * note\n      this.oscillators.osc2.detune.value = 101 * note\n      this.oscillators.osc3.detune.value = 100 * note\n    }\n    if(!step){\n      this.stopAll()\n    }\n  }\n}\n\nexport const bassControlFunction = (state, modules, moduleMap, ctx, x, y) => {\n  const initialVolume = state.instruments.bass.volume\n  const volume = new ControlValue(ctx, x, y, 'Volume', initialVolume, 10, (value) => {\n      state.instruments.bass.setProp({ property: 'volume', value })\n  })\n  modules.push(volume)\n  moduleMap['0/0'] = volume\n  moduleMap['1/0'] = volume\n  moduleMap['2/0'] = volume\n\n  const initialFilter = state.instruments.bass.filterValue\n  const filter = new ControlValue(ctx, x+3*40, y, 'Filter', initialFilter, 20, (value) => {\n      state.instruments.bass.setProp({ property: 'filterValue', value })\n  })\n  modules.push(filter)\n  moduleMap['3/0'] = filter\n  moduleMap['4/0'] = filter\n  moduleMap['5/0'] = filter\n\n  const waveform = new ControlOptions(ctx, x+7*40, y, 'Waveform', ['triangle', 'square','sawtooth'],\n  state.instruments.bass.waveform,\n  (value) => {\n    state.instruments.bass.setProp({ property: 'waveform', value })\n  })\n  modules.push(waveform)\n  moduleMap['7/0'] = waveform\n  moduleMap['8/0'] = waveform\n  moduleMap['9/0'] = waveform\n  moduleMap['10/0'] = waveform\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/synth.js","import Options from './Options'\n\nexport default class ControlOptions {\n  constructor(ctx, x, y, text, options, currentValue, cb){\n    this.context = ctx\n    this.x = x\n    this.y = y\n    this.text = text\n    this.valueInput = new Options({\n      options, currentValue, cb, ctx, x: x+80, y\n    })\n  }\n  handleClick(x, y, innerX, innerY){\n    this.valueInput.handleClick(x, y, innerX, innerY)\n  }\n  render(){\n    this.context.fillStyle = 'black'\n    this.context.fillRect(this.x, this.y, 120, 40)\n    this.context.clearRect(this.x+1, this.y+1, 118, 38)\n    this.context.fillText(this.text, this.x+5, this.y+25, 80);\n    this.valueInput.render()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/InstrumentControlOptions.js","export default class Options {\n  constructor({ options, currentValue, cb, ctx, x, y }){\n    this.context = ctx\n    this.idx = currentValue !== undefined ? options.indexOf(currentValue) : 0\n    this.options = options\n    this.callBack = cb\n    this.x = x\n    this.y = y\n  }\n  render(){\n    this.context.fillStyle = 'black'\n    this.context.fillRect(this.x, this.y, 80, 40)\n    this.context.clearRect(this.x+1, this.y+1, 78, 38)\n    const text = this.options[this.idx]\n    const textWidth = Math.ceil(this.context.measureText(text).width)\n    const offset = 40 - textWidth/2\n    this.context.fillText(text, this.x+offset, this.y+25, 39);\n  }\n  handleClick(){\n    this.idx = (this.idx+1) % this.options.length\n    this.render()\n    this.callBack(this.options[this.idx])\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Options.js","export const COLOR = 'white'\nexport const LOOP_LENGTH = 16\nexport const SEQUENCE_LENGTH = 4\n\n\n// WEBPACK FOOTER //\n// ./src/constants.js","import Listener from './Listener'\nimport ControlValue from '../ui/InstrumentControlValue'\nimport ControlOptions from '../ui/InstrumentControlOptions'\n\nconst fmModeMethods = {\n  'parallel': 'setupOscillators_A',\n  'vertical': 'setupOscillators_B'\n}\n\nexport default class fmSynth extends Listener {\n  constructor(ctx){\n    super()\n    this.volume = 8\n    this.mod1Oct = 0\n    this.mod2Oct = 0\n    this.context = ctx\n    this.decay = 1\n    this.prevOsc = null\n    this.oscillators = {}\n    this.playing = false\n    this.waveformOptions = ['square', 'sine', 'sawtooth']\n    this.waveform = 'square'\n    this.fmMode = 'parallel'\n  }\n  storeOscillators(data){\n    Object.keys(data).forEach(key => {\n      this.oscillators[key] = data[key]\n    })\n  }\n  stopAll(){\n    if(!this.oscillators.osc1) return\n    this.oscillators.gainNode1.gain.setTargetAtTime(0, this.context.currentTime+(this.decay*0.01), 0.05);\n    this.oscillators.gainNode2.gain.setTargetAtTime(0, this.context.currentTime+(this.decay*0.01), 0.05);\n    this.oscillators.osc1.stop(this.context.currentTime+1)\n    this.oscillators.osc2.stop(this.context.currentTime+1)\n    this.oscillators.modulator1.stop(this.context.currentTime+1)\n    this.oscillators.modulator2.stop(this.context.currentTime+1)\n    this.oscillators.modulatorA.stop(this.context.currentTime+1)\n    this.oscillators.modulatorB.stop(this.context.currentTime+1)\n    this.oscillators = {}\n    this.playing = false\n  }\n  getModulator(oct, wave, gain){\n    const modulator = this.context.createOscillator()\n    const modulatorGain = this.context.createGain()\n    modulator.type = wave\n    modulator.frequency.value = oct\n    modulatorGain.gain.value = gain\n    modulator.connect(modulatorGain)\n    return [ modulator, modulatorGain ]\n  }\n  getOscillator(pan){\n    const osc = this.context.createOscillator()\n    osc.type = this.waveform\n\n    const gainNode = this.context.createGain()\n    gainNode.gain.value = this.volume * 0.02\n\n    const panNode = this.context.createStereoPanner()\n\n    let panValue = 0\n    if(pan === 'left') panValue = -0.7\n    if(pan === 'right') panValue = 0.7\n    panNode.pan.value = panValue\n\n    const filter = this.context.createBiquadFilter();\n    filter.type = 'lowpass';\n    filter.frequency.value = 0;\n\n    osc.connect(filter)\n    filter.connect(gainNode)\n    gainNode.connect(panNode)\n    panNode.connect(this.context.destination)\n    return [ osc, filter, gainNode ]\n  }\n  setupOscillators_A(){\n    const [ osc1, filter1, gainNode1 ] = this.getOscillator('left')\n    const [ osc2, filter2, gainNode2 ] = this.getOscillator('right')\n    const [ modulatorA, modulatorGainA ] = this.getModulator(5.5*(this.mod1Oct*5), 'sawtooth', 70)\n    const [ modulatorB, modulatorGainB ] = this.getModulator(5.5*(this.mod2Oct*10), 'sine', 90)\n    const [ modulator1, modulatorGain1 ] = this.getModulator(5.5*(this.mod1Oct*5), 'sawtooth', 50)\n    const [ modulator2, modulatorGain2 ] = this.getModulator(5.5*(this.mod2Oct*10), 'sine', 40)\n    modulatorGainA.connect(modulator1.frequency)\n    modulatorGainB.connect(modulator2.frequency)\n    modulatorGain1.connect(osc1.frequency)\n    modulatorGain2.connect(osc2.frequency)\n    return [\n      osc1, osc2,\n      gainNode1, gainNode2,\n      modulatorA, modulatorB,\n      modulator1, modulator2,\n      filter1, filter2\n     ]\n  }\n  setupOscillators_B(){\n    const [ osc1, filter1, gainNode1 ] = this.getOscillator()\n    const [ osc2, filter2, gainNode2 ] = this.getOscillator()\n    const [ modulatorA, modulatorGainA ] = this.getModulator(5.5*(this.mod1Oct*5), 'square', 35)\n    const [ modulatorB, modulatorGainB ] = this.getModulator(5.5*(this.mod2Oct*10), 'sine', 50)\n    const [ modulator1, modulatorGain1 ] = this.getModulator(5.5*(this.mod1Oct*5), 'sine', 30)\n    const [ modulator2, modulatorGain2 ] = this.getModulator(5.5*(this.mod2Oct*10), 'sine', 35)\n    modulatorGainA.connect(modulator1.frequency)\n    modulatorGain1.connect(modulatorB.frequency)\n    modulatorGainB.connect(osc1.frequency)\n    gainNode1.connect(osc2.frequency)\n    return [\n      osc1, osc2,\n      gainNode1, gainNode2,\n      modulatorA, modulatorB,\n      modulator1, modulator2,\n      filter1, filter2\n     ]\n  }\n  play({ step, note, hold }){\n    if(step && !hold){\n      this.stopAll()\n      const methodName = fmModeMethods[this.fmMode]\n      const [\n        osc1, osc2,\n        gainNode1, gainNode2,\n        modulatorA, modulatorB,\n        modulator1, modulator2,\n        filter1, filter2\n      ] = this[methodName](note, step)\n      this.storeOscillators({\n        osc1, osc2,\n        modulatorA, modulatorB,\n        modulator1, modulator2,\n        gainNode1, gainNode2\n      })\n      modulatorA.start()\n      modulatorB.start()\n      modulator1.start()\n      modulator2.start()\n      osc1.start()\n      osc2.start()\n      filter1.frequency.setTargetAtTime(5000, this.context.currentTime, 0.03)\n      filter2.frequency.setTargetAtTime(5000, this.context.currentTime, 0.03)\n      this.playing = true\n    }\n    if((step && this.playing) || (hold && step && this.playing)){\n      this.oscillators.osc1.detune.value = note*101\n      this.oscillators.osc1.frequency.value = step*220\n      this.oscillators.osc2.detune.value = note*99\n      this.oscillators.osc2.frequency.value = step*220\n    }\n    if(!step && this.oscillators.osc1){\n      this.stopAll()\n    }\n  }\n}\n\nexport const fmControlFunction = (state, modules, moduleMap, ctx, x, y) => {\n  const initialVolume = state.instruments.fm.volume\n  const volume = new ControlValue(ctx, x, y, 'Volume', initialVolume, 10, (value) => {\n      state.instruments.fm.setProp({ property: 'volume', value })\n  })\n  modules.push(volume)\n  moduleMap['0/0'] = volume\n  moduleMap['1/0'] = volume\n  moduleMap['2/0'] = volume\n\n  const initialDecay = state.instruments.fm.decay\n  const decay = new ControlValue(ctx, x, y+40, 'Decay', initialDecay, 9, (value) => {\n      if(value === 0) value += 1\n      state.instruments.fm.setProp({ property: 'decay', value })\n  })\n  modules.push(decay)\n  moduleMap['0/1'] = decay\n  moduleMap['1/1'] = decay\n  moduleMap['2/1'] = decay\n\n  const waveform = new ControlOptions(ctx, x+3*40, y, 'Waveform', ['square', 'sine','sawtooth'],\n  state.instruments.fm.waveform,\n  (value) => {\n    state.instruments.fm.setProp({ property: 'waveform', value })\n  })\n  modules.push(waveform)\n  moduleMap['3/0'] = waveform\n  moduleMap['4/0'] = waveform\n  moduleMap['5/0'] = waveform\n  moduleMap['6/0'] = waveform\n\n  const fmMode = new ControlOptions(ctx, x+3*40, y+40, 'FM Mode', ['vertical', 'parallel'],\n  state.instruments.fm.fmMode,\n  (value) => {\n    state.instruments.fm.setProp({ property: 'fmMode', value })\n  })\n  modules.push(fmMode)\n  moduleMap['3/1'] = fmMode\n  moduleMap['4/1'] = fmMode\n  moduleMap['5/1'] = fmMode\n  moduleMap['6/1'] = fmMode\n\n  const initialMod1Oct = state.instruments.fm.mod1Oct\n  const mod1Oct = new ControlValue(ctx, x+7*40, y, 'Mod1 Oct', initialMod1Oct, 5, (value) => {\n      state.instruments.fm.setProp({ property: 'mod1Oct', value })\n  })\n  modules.push(mod1Oct)\n  moduleMap['7/0'] = mod1Oct\n  moduleMap['8/0'] = mod1Oct\n  moduleMap['9/0'] = mod1Oct\n\n  const initialMod2Oct = state.instruments.fm.mod2Oct\n  const mod2Oct = new ControlValue(ctx, x+7*40, y+40, 'Mod2 Oct', initialMod2Oct, 5, (value) => {\n      state.instruments.fm.setProp({ property: 'mod2Oct', value })\n  })\n  modules.push(mod2Oct)\n  moduleMap['7/1'] = mod2Oct\n  moduleMap['8/1'] = mod2Oct\n  moduleMap['9/1'] = mod2Oct\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/fm.js","import Listener from './Listener'\nimport ControlValue from '../ui/InstrumentControlValue'\n\nexport default class Hat extends Listener {\n  constructor(ctx){\n    super()\n    this.volume = 8\n    this.tone = 25\n    this.context = ctx\n    this.prevOsc = null\n    this.buffer = noiseBuffer(ctx)\n  }\n  getNoise(){\n    const noise = this.context.createBufferSource();\n    noise.buffer = this.buffer\n    const noiseFilter = this.context.createBiquadFilter();\n    noiseFilter.type = 'highpass';\n    noiseFilter.frequency.value = this.tone * 100;\n    noise.connect(noiseFilter);\n\n    const noiseEnvelope = this.context.createGain();\n    noiseEnvelope.gain.value = this.volume * 0.1\n    noiseFilter.connect(noiseEnvelope);\n    noiseEnvelope.connect(this.context.destination);\n    return [ noise, noiseEnvelope ]\n  }\n  stopAll(){\n    if(this.prevOsc){\n      this.prevOsc.stop(0)\n    }\n  }\n  play({ step }){\n    if(step){\n      this.stopAll()\n      const time = step === 1 ? 0.01 : 0.05\n      const [ noise, noiseEnvelope ] = this.getNoise()\n      this.prevOsc = noise\n      noise.start(0)\n      noiseEnvelope.gain.setTargetAtTime(0, this.context.currentTime, time);\n      noise.stop(this.context.currentTime + 0.30)\n    }\n  }\n}\n\nfunction noiseBuffer(context) {\n  const bufferSize = context.sampleRate;\n  const buffer = context.createBuffer(1, bufferSize, context.sampleRate);\n  const output = buffer.getChannelData(0);\n  for (var i = 0; i < bufferSize; i++) {\n    output[i] = Math.random() * 2 - 1;\n  }\n  return buffer;\n};\n\nexport const hatControlFunction = (state, modules, moduleMap, ctx, x, y) => {\n  const initialVolume = state.instruments.hat.volume\n  const volume = new ControlValue(ctx, x, y, 'Volume', initialVolume, 10, (value) => {\n      state.instruments.hat.setProp({ property: 'volume', value })\n  })\n  modules.push(volume)\n  moduleMap['0/0'] = volume\n  moduleMap['1/0'] = volume\n  moduleMap['2/0'] = volume\n\n  const initialTone = state.instruments.hat.tone\n  const tone = new ControlValue(ctx, x+3*40, y, 'Tone', initialTone, 50, (value) => {\n      state.instruments.hat.setProp({ property: 'tone', value })\n  })\n  modules.push(tone)\n  moduleMap['3/0'] = tone\n  moduleMap['4/0'] = tone\n  moduleMap['5/0'] = tone\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/hat.js","import Listener from './Listener'\nimport ControlValue from '../ui/InstrumentControlValue'\n\nexport default class KickSynth extends Listener {\n  constructor(ctx){\n    super()\n    this.volume = 8\n    this.context = ctx\n    this.decay = 0\n    this.attack = 9\n    this.config = {\n      type: 'sine'\n    }\n  }\n  stopAll(){}\n  getOscillators(note){\n    const osc = this.context.createOscillator()\n    const blipOsc = this.context.createOscillator()\n    const gain = this.context.createGain()\n    const blipGain = this.context.createGain()\n    gain.gain.value = this.volume * 0.1\n    blipGain.gain.value = (this.volume - (9 - this.attack)) * 0.1\n    osc.frequency.value = 55\n    blipOsc.frequency.value = 440\n    osc.detune.value = note * 100\n    blipOsc.detune.value = note * 100\n    osc.connect(gain)\n    blipOsc.connect(blipGain)\n    gain.connect(this.context.destination)\n    blipGain.connect(this.context.destination)\n    return [ osc, gain, blipOsc, blipGain ]\n  }\n  play({ step, note }){\n    const [ osc, gain, blipOsc, blipGain ] = this.getOscillators(note)\n    if(step){\n      osc.start()\n      blipOsc.start()\n      blipGain.gain.setTargetAtTime(this.volume * 0.1, this.context.currentTime, 0.01*this.attack);\n      gain.gain.setTargetAtTime(0, this.context.currentTime, 0.07 + (this.decay * 0.01));\n      blipGain.gain.setTargetAtTime(0, this.context.currentTime, 0.10);\n      blipOsc.frequency.setTargetAtTime(55, this.context.currentTime, 0.05)\n      osc.stop(this.context.currentTime+1)\n      blipOsc.stop(this.context.currentTime+1)\n    }\n  }\n}\n\nexport const kickControlFunction = (state, modules, moduleMap, ctx, x, y) => {\n  const initialVolume = state.instruments.kick.volume\n  const volume = new ControlValue(ctx, x, y, 'Volume', initialVolume, 10, (value) => {\n      state.instruments.kick.setProp({ property: 'volume', value })\n  })\n  modules.push(volume)\n  moduleMap['0/0'] = volume\n  moduleMap['1/0'] = volume\n  moduleMap['2/0'] = volume\n\n  const initialAttack = state.instruments.kick.attack\n  const attack = new ControlValue(ctx, x, y+40, 'Attack', initialAttack, 10, (value) => {\n      state.instruments.kick.setProp({ property: 'attack', value })\n  })\n  modules.push(attack)\n  moduleMap['0/1'] = attack\n  moduleMap['1/1'] = attack\n  moduleMap['2/1'] = attack\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/kick.js","import Listener from './Listener'\nimport ControlValue from '../ui/InstrumentControlValue'\nimport ControlOptions from '../ui/InstrumentControlOptions'\n\nexport default class LeadSynth extends Listener {\n  constructor(ctx){\n    super()\n    this.volume = 8\n    this.context = ctx\n    this.previousTone = 0\n    this.previousOct = 1\n    this.decay = 0\n    this.filterValue = 0\n    this.initialFrequency = 0\n    this.prevOsc = null\n    this.playing = false\n    this.filterType = 'lowpass'\n    this.Q = 0\n    this.octave = [1, 1]\n    this.waveform = ['sine', 'sine']\n  }\n  stopAll(){\n    if(!this.prevOsc) return\n    this.prevGainNode.forEach(g => g.gain.setTargetAtTime(0, this.context.currentTime+0.01+(this.decay*0.02), 0.05));\n    this.prevOsc.forEach(osc => osc.stop(this.context.currentTime+1))\n    this.prevOsc = null\n    this.playing = false\n  }\n  getOscillators(note, oct, idx){\n    this.previousTone = note\n    this.previousOct = oct\n\n    const osc = this.context.createOscillator()\n    osc.detune.value = this.previousTone * 100\n    osc.frequency.value = this.previousOct * (440 * this.octave[idx])\n    osc.type = this.waveform[idx]\n\n    const gainNode = this.context.createGain()\n    gainNode.gain.value = (this.volume/2)*0.1\n\n    const filter = this.context.createBiquadFilter();\n    filter.type = this.filterType\n    filter.Q.value = this.Q * 5\n    filter.frequency.value = this.initialFrequency ? this.initialFrequency * 1000 : 500\n\n    osc.connect(filter)\n    filter.connect(gainNode)\n    gainNode.connect(this.context.destination)\n\n    return [ osc, gainNode, filter ]\n  }\n  play({ step, note, hold }){\n    if(step && !hold){\n      this.stopAll()\n      const [ osc1, gainNode1, filter1 ] = this.getOscillators(note, step, 0)\n      const [ osc2, gainNode2, filter2 ] = this.getOscillators(note, step, 1)\n      this.prevOsc = [ osc1, osc2 ]\n      this.prevGainNode = [ gainNode1, gainNode2 ]\n      osc1.start()\n      osc2.start()\n      filter1.frequency.setTargetAtTime(this.filterValue*1000, this.context.currentTime, 0.1)\n      filter2.frequency.setTargetAtTime(this.filterValue*1000, this.context.currentTime, 0.1)\n      this.playing = true\n    }\n    if((step && this.playing) || (hold && step && this.playing)){\n      this.prevOsc.forEach(osc => osc.detune.setTargetAtTime(note*100, this.context.currentTime, 0.03))\n      this.prevOsc.forEach(osc => osc.frequency.setTargetAtTime(step*440, this.context.currentTime, 0.03))\n    }\n    if(!step && this.prevOsc){\n      this.stopAll()\n    }\n\n  }\n}\n\nexport const leadControlFunction = (state, modules, moduleMap, ctx, x, y) => {\n  const initialVolume = state.instruments.lead.volume\n  const volume = new ControlValue(ctx, x, y, 'Volume', initialVolume, 10, (value) => {\n      state.instruments.lead.setProp({ property: 'volume', value })\n  })\n  modules.push(volume)\n  moduleMap['0/0'] = volume\n  moduleMap['1/0'] = volume\n  moduleMap['2/0'] = volume\n\n  const waveform1 = new ControlOptions(ctx, x+4*40, y, 'Waveform 1', ['square', 'sine','sawtooth'],\n  state.instruments.lead.waveform[0],\n  (value) => {\n    state.instruments.lead.setProp({ property: ['waveform', 0], value })\n  })\n  modules.push(waveform1)\n  moduleMap['4/0'] = waveform1\n  moduleMap['5/0'] = waveform1\n  moduleMap['6/0'] = waveform1\n  moduleMap['7/0'] = waveform1\n\n  const waveform2 = new ControlOptions(ctx, x+4*40, y+40, 'Waveform 2', ['square', 'sine','sawtooth'],\n  state.instruments.lead.waveform[1],\n  (value) => {\n    state.instruments.lead.setProp({ property: ['waveform', 1], value })\n  })\n  modules.push(waveform2)\n  moduleMap['4/1'] = waveform2\n  moduleMap['5/1'] = waveform2\n  moduleMap['6/1'] = waveform2\n  moduleMap['7/1'] = waveform2\n\n  const octave1 = new ControlOptions(ctx, x, y+40, 'Octave 1', [0.125, 0.25, 0.5, 1, 2],\n  state.instruments.lead.octave[0],\n  (value) => {\n    state.instruments.lead.setProp({ property: ['octave', 0], value })\n  })\n  modules.push(octave1)\n  moduleMap['0/1'] = octave1\n  moduleMap['1/1'] = octave1\n  moduleMap['2/1'] = octave1\n  moduleMap['3/1'] = octave1\n\n  const octave2 = new ControlOptions(ctx, x, y+80, 'Octave 2', [0.125, 0.25, 0.5, 1, 2],\n  state.instruments.lead.octave[1],\n  (value) => {\n    state.instruments.lead.setProp({ property: ['octave', 1], value })\n  })\n  modules.push(octave2)\n  moduleMap['0/2'] = octave2\n  moduleMap['1/2'] = octave2\n  moduleMap['2/2'] = octave2\n  moduleMap['3/2'] = octave2\n\n  const initialFilter = state.instruments.lead.filterValue\n  const filter = new ControlValue(ctx, x+40*10, y, 'Filter End', initialFilter, 10, (value) => {\n      state.instruments.lead.setProp({ property: 'filterValue', value })\n  })\n  modules.push(filter)\n  moduleMap['10/0'] = filter\n  moduleMap['11/0'] = filter\n  moduleMap['12/0'] = filter\n\n  const initialFrequencyValue = state.instruments.lead.initialFrequency\n  const initialFrequency = new ControlValue(ctx, x+40*8, y, 'Filter Start', initialFrequencyValue, 10, (value) => {\n      state.instruments.lead.setProp({ property: 'initialFrequency', value })\n  })\n  modules.push(initialFrequency)\n  moduleMap['8/0'] = initialFrequency\n  moduleMap['9/0'] = initialFrequency\n  moduleMap['10/0'] = initialFrequency\n\n  const filterType = new ControlOptions(ctx, x+11*40, y+40, 'Filter Type',\n  ['lowpass', 'highpass','bandpass', 'notch'],\n  state.instruments.lead.filterType,\n  (value) => {\n    state.instruments.lead.setProp({ property: 'filterType', value })\n  })\n  modules.push(filterType)\n  moduleMap['11/1'] = filterType\n  moduleMap['12/1'] = filterType\n  moduleMap['13/1'] = filterType\n  moduleMap['14/1'] = filterType\n\n  const initialQ = state.instruments.lead.Q\n  const controlQ = new ControlValue(ctx, x+40*8, y+40, 'Filter Q', initialQ, 10, (value) => {\n      state.instruments.lead.setProp({ property: 'Q', value: value })\n  })\n  modules.push(controlQ)\n  moduleMap['8/1'] = controlQ\n  moduleMap['9/1'] = controlQ\n  moduleMap['10/1'] = controlQ\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/leadSynth.js","import Listener from './Listener'\nimport ControlValue from '../ui/InstrumentControlValue'\n\nexport default class Snare extends Listener {\n  constructor(ctx){\n    super()\n    this.volume = 8\n    this.decay = 4\n    this.context = ctx\n    this.config = {\n      type: 'triangle'\n    }\n    this.buffer = noiseBuffer(ctx)\n  }\n  setVolume(value){\n    this.volume = value\n  }\n  stopAll(){}\n  getNoise(){\n    const noise = this.context.createBufferSource();\n    noise.buffer = this.buffer\n\n    const noiseFilter = this.context.createBiquadFilter();\n    noiseFilter.type = 'highpass';\n    noiseFilter.frequency.value = 1000;\n\n    const noiseEnvelope = this.context.createGain();\n    noiseEnvelope.gain.value = this.volume * 0.1\n\n    noise.connect(noiseFilter);\n    noiseFilter.connect(noiseEnvelope);\n    noiseEnvelope.connect(this.context.destination);\n    return [ noise, noiseEnvelope ]\n  }\n  getOscillators(){\n  const osc = this.context.createOscillator();\n  osc.type = this.config.type;\n  osc.frequency.value = 150\n\n  const gain = this.context.createGain()\n  gain.gain.value = this.volume * 0.1\n  osc.connect(gain);\n  gain.connect(this.context.destination);\n  return [ osc, gain ]\n  }\n  play({ step }){\n    if(step){\n      const [ osc, gain ] = this.getOscillators()\n      const [ noise, noiseEnvelope ] = this.getNoise()\n      osc.start()\n      noise.start()\n      gain.gain.setTargetAtTime(0, this.context.currentTime, this.decay * 0.01);\n      noiseEnvelope.gain.setTargetAtTime(0, this.context.currentTime, this.decay * 0.01);\n      osc.stop(this.context.currentTime + 0.30)\n      noise.stop(this.context.currentTime + 0.30)\n    }\n  }\n}\n\nfunction noiseBuffer(context) {\n  const bufferSize = context.sampleRate;\n  const buffer = context.createBuffer(1, bufferSize, context.sampleRate);\n  const output = buffer.getChannelData(0);\n  for (var i = 0; i < bufferSize; i++) {\n    output[i] = Math.random() * 2 - 1;\n  }\n  return buffer;\n};\n\nexport const snareControlFunction = (state, modules, moduleMap, ctx, x, y) => {\n  const initialVolume = state.instruments.snare.volume\n  const volume = new ControlValue(ctx, x, y, 'Volume', initialVolume, 10, (value) => {\n      state.instruments.snare.setProp({ property: 'volume', value })\n  })\n  modules.push(volume)\n  moduleMap['0/0'] = volume\n  moduleMap['1/0'] = volume\n  moduleMap['2/0'] = volume\n\n  const initialDecay = state.instruments.snare.decay\n  const decay = new ControlValue(ctx, x+(3*40), y, 'Decay', initialDecay, 10, value => {\n    state.instruments.snare.setProp({ property: 'decay', value })\n  })\n  modules.push(decay)\n  moduleMap['3/0'] = decay\n  moduleMap['4/0'] = decay\n  moduleMap['5/0'] = decay\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/snare.js","import KickSynth from './instruments/kick'\nimport LeadSynth from './instruments/leadSynth'\nimport BassSynth from './instruments/synth'\nimport fm from './instruments/fm'\nimport Snare from './instruments/snare'\nimport Hat from './instruments/hat'\nimport { LOOP_LENGTH, SEQUENCE_LENGTH } from './constants'\n\nfunction makeStepArray(steps){\n  let empty = []\n  empty.length = steps\n  empty.fill(undefined)\n  let arr = empty.map(item => ({ step: 0, note: 0, hold: false }))\n  return arr\n}\n\nexport default class State {\n  constructor(audioCtx) {\n    this.swingIsOn = false\n    this.isPlaying = false\n    this.tempo = 120\n    this.viewPage = 0\n    this.playPage = 0\n    this.sequenceIndex = 0\n    this.sequence = [0, 0, 0, 0]\n    this.blocks = {}\n    this.blinkers = []\n    this.children = []\n    this.steps = {\n      bass: [makeStepArray(16),makeStepArray(16), makeStepArray(16), makeStepArray(16)],\n      kick: [makeStepArray(16),makeStepArray(16), makeStepArray(16), makeStepArray(16)],\n      snare: [makeStepArray(16),makeStepArray(16), makeStepArray(16), makeStepArray(16)],\n      lead: [makeStepArray(16),makeStepArray(16), makeStepArray(16), makeStepArray(16)],\n      fm: [makeStepArray(16),makeStepArray(16), makeStepArray(16), makeStepArray(16)],\n      hat: [makeStepArray(16),makeStepArray(16), makeStepArray(16), makeStepArray(16)]\n    }\n    this.copyBuffer = { notes: {}, steps: {} }\n    this.step = 0\n    this.context = audioCtx\n    this.instruments = {\n      bass: new BassSynth(audioCtx),\n      kick: new KickSynth(audioCtx),\n      snare: new Snare(audioCtx),\n      fm: new fm(audioCtx),\n      lead: new LeadSynth(audioCtx),\n      hat: new Hat(audioCtx)\n    }\n  }\n  push(child){\n    this.children.push(child)\n    return child\n  }\n  trigger(message){\n    switch (message.type) {\n      case 'get_page': return this.steps[message.instrument][this.viewPage]\n      case 'toggle_swing': return this.swingIsOn = !this.swingIsOn\n      case 'set_page':\n        this.viewPage = message.page\n        this.drawScreen()\n        return message.page\n      case 'copy_page': return this.copyPage()\n      case 'paste_page': return this.pastePage()\n      case 'set_sequence': return this.setSequence(message.sequence)\n    }\n  }\n  toggleStep(idx, type, values){\n    this.steps[type][this.viewPage][idx].step = (this.steps[type][this.viewPage][idx].step + 1) % values\n  }\n  togglePlay(){\n    this.isPlaying = !this.isPlaying\n\n    if(this.isPlaying){\n      this.context.resume().then(() => {\n        this.noteTime = 0.0\n        this.startTime = this.context.currentTime + 0.005\n        this.rhythmIndex = 0\n        this.previousRhythmIndex = null\n        return this.schedule()\n      })\n    } else {\n      return this.stop()\n    }\n  }\n  setSequence(sequence){\n    this.sequence = sequence\n  }\n  copyPage(){\n    Object.keys(this.steps).forEach(stepKey => {\n      this.copyBuffer.steps[stepKey] = this.steps[stepKey][this.viewPage].slice().map(step => Object.assign({}, step))\n    })\n  }\n  pastePage(){\n    Object.keys(this.steps).forEach(stepKey => {\n      this.steps[stepKey][this.viewPage] = this.copyBuffer.steps[stepKey].slice()\n    })\n    this.drawScreen()\n  }\n  schedule(){\n    let currentTime = this.context.currentTime\n    currentTime -= this.startTime\n    const nextTime = currentTime + 0.200\n    while (this.noteTime < nextTime) {\n      var contextPlayTime = this.noteTime + this.startTime\n      if (this.viewPage === this.playPage) {\n        this.blinkers[this.rhythmIndex].toggle()\n      }\n      if(this.previousRhythmIndex !== null) this.blinkers[this.previousRhythmIndex].toggle(false)\n      /* for each instrument pass the step object for this page and beat into the play method */\n      Object.keys(this.steps).forEach(type => {\n        this.instruments[type].play(this.steps[type][this.playPage][this.rhythmIndex])\n      })\n      this.advanceNote()\n    }\n    this.interval = setTimeout(() => { this.schedule() }, 0)\n  }\n  advanceNote(){\n    let secondsPerBeat = 60 / this.tempo\n    this.previousRhythmIndex = this.rhythmIndex\n    this.rhythmIndex++;\n    if (this.rhythmIndex === LOOP_LENGTH) {\n      this.rhythmIndex = 0;\n      this.sequenceIndex = (this.sequenceIndex + 1) % SEQUENCE_LENGTH\n      this.playPage = this.sequence[this.sequenceIndex]\n      this.drawScreen()\n    }\n    if(this.swingIsOn){\n      this.noteTime += this.rhythmIndex % 2 ? 0.32 * secondsPerBeat : 0.18 * secondsPerBeat\n    } else {\n      this.noteTime += 0.25 * secondsPerBeat\n    }\n  }\n  stop(){\n    Object.keys(this.instruments).forEach(key => {\n      this.instruments[key].stopAll()\n    })\n    this.blinkers[this.previousRhythmIndex].toggle()\n    window.clearInterval(this.interval)\n    this.context.suspend()\n  }\n  drawScreen(){\n    this.children.forEach(child => child.render())\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/state.js","export default class BeatMarker {\n  constructor(ctx, x, y){\n    this.context = ctx\n    this.x = x\n    this.y = y\n  }\n  render(){\n    this.context.fillStyle = 'red'\n    this.context.fillRect(this.x, this.y, 40, 40)\n    this.context.clearRect(this.x, this.y, 30, 30)\n  }\n  handleClick(){}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/BeatMarker.js","export default class Button {\n  constructor(text, ctx, x, y, handleClick){\n    this.x = x\n    this.y = y\n    this.text = text\n    this.textWidth = Math.ceil(ctx.measureText(text).width)\n    this.width = Math.ceil((this.textWidth+10)/40) * 40\n    this.toggled = false\n    this.context = ctx\n    this.callBack = handleClick\n  }\n  handleClick(x, y){\n    this.toggled = !this.toggled\n    this.callBack(this.toggled)\n    this.render()\n  }\n  render(){\n    this.context.clearRect(this.x, this.y, this.width, 40)\n    this.context.fillStyle = 'black'\n      this.context.fillRect(this.x, this.y, this.width, 40)\n      if(this.isToggled ? this.isToggled() : this.toggled){\n        this.context.fillStyle = '#999'\n        this.context.fillRect(this.x+1, this.y, this.width-2, 39)\n      } else {\n        this.context.clearRect(this.x+1, this.y+1, this.width-2, 39)\n      }\n      this.context.fillStyle = 'black'\n      const wordMargin = (this.width/2)-(this.textWidth/2)\n      this.context.fillText(this.text, this.x+wordMargin, this.y+25, this.width+3);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Button.js","import BassSynth from '../instruments/synth'\nimport { BinSwitch, OctaveSwitch } from './switch'\nimport Blinker from './Blinker'\nimport Note from './note'\nimport instrumentControlFunctions from '../instruments/instrumentControlFunctions'\n\nexport default class InstrumentWindow {\n  constructor(state, ctx, x, y){\n    this.x = x\n    this.y = y\n    this.parent = state\n    this.context = ctx\n    this.instrument = 'bass'\n    this.instrumentControlMap = {}\n    this.moduleMap = {}\n    this.children = []\n    this.instrumentControls = []\n    this.build()\n  }\n  push(child){\n    this.children.push(child)\n    return child\n  }\n  build(){\n    for(var i = 0; i < 16; i++){\n      this.moduleMap[`${i}/9`] = this.push(new Note(i, this, this.context, this.x+i*40, this.y+9*40))\n      this.moduleMap[`${i}/10`] = this.push(new OctaveSwitch(i, this, this.context, this.x+i*40, this.y+10*40))\n      this.moduleMap[`${i}/11`] = this.push(new Blinker(i, this.parent, this.context, this.x+i*40, this.y+11*40))\n    }\n    this.buildInstrumentControls()\n  }\n  buildInstrumentControls(){\n    instrumentControlFunctions[this.instrument](\n      this.parent,\n      this.instrumentControls,\n      this.instrumentControlMap,\n      this.context,\n      this.x, this.y\n    )\n  }\n  trigger(message){\n    return this.parent.trigger(message)\n  }\n  setInstrument(instrument){\n    this.instrument = instrument\n    this.instrumentControls = []\n    this.instrumentControlMap = {}\n    this.build()\n    this.parent.drawScreen()\n  }\n  getPage(){\n    return this.trigger({ type: 'get_page', instrument: this.instrument })\n  }\n  renderChildren(){\n    this.children.forEach(child => child.render())\n    this.instrumentControls.forEach(child => child.render())\n  }\n  render(){\n    this.context.fillRect(this.x, this.y, 640, 480)\n    this.context.clearRect(this.x+1, this.y+1, 638, 478)\n    this.renderChildren()\n  }\n  handleClick(x, y, innerX, innerY){\n    let xCell = x - (this.x/40)\n    let yCell = y - (this.y/40)\n    let key = `${xCell}/${yCell}`\n    let module = this.moduleMap[key] || this.instrumentControlMap[key]\n    if(module) module.handleClick(x, y, innerX, innerY)\n  }\n}\n\n/*\n    0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16\n0   . . . . . . . . . . .  .  .  .  .  .  .\n1   . . . . . . . . . . .  .  .  .  .  .  .\n2   . . . . . . . . . . .  .  .  .  .  .  .\n3   . . . . . . . . . . .  .  .  .  .  .  .\n4   . . . . . . . . . . .  .  .  .  .  .  .\n5   . . . . . . . . . . .  .  .  .  .  .  .\n6   . . . . . . . . . . .  .  .  .  .  .  .\n7   . . . . . . . . . . .  .  .  .  .  .  .\n8   . . . . . . . . . . .  .  .  .  .  .  .\n9   . . . . . . . . . . .  .  .  .  .  .  .\n10  . . . . . . . . . . .  .  .  .  .  .  .\n11  . . . . . . . . . . .  .  .  .  .  .  .\n*/\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/InstrumentWindow.js","export default class PageButton {\n  constructor(state, ctx, x, y, handleClick){\n    this.context = ctx\n    this.state = state\n    this.pageOne = x/40\n    this.x = x\n    this.y = y\n    this.value = 0\n    this.callBack = handleClick\n  }\n  handleClick(x, y){\n    const buttonIdx = x - this.pageOne\n    this.value = buttonIdx\n    this.state.trigger({ type: 'set_page', page: this.value })\n    this.render()\n  }\n  render(){\n    this.value = this.state.viewPage // reset page btn to top level page value\n    this.context.fillStyle = 'black'\n    for(let i = 0; i < 4; i++){\n      const offset = 40 * i\n      const name = `Pg ${i+1}`\n      this.context.fillRect(this.x+offset, this.y, 40, 40)\n      if(i === this.value){\n        this.context.fillStyle = '#999'\n        this.context.fillRect(this.x+offset+1, this.y, 39-(i === 3 ? 1 : 0), 39)\n      } else {\n        this.context.clearRect(this.x+offset+1, this.y, 39-(i === 3 ? 1 : 0), 39)\n      }\n      this.context.fillStyle = 'black'\n      this.context.fillText(name, this.x+offset+3, this.y+25, 80);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/PageButton.js","export default class PlayBtn {\n  constructor(ctx, state, x, y){\n    this.context = ctx\n    this.state = state\n    this.x = x\n    this.y = y\n    this.on = state.isPlaying\n  }\n  render(){\n    this.on = this.state.isPlaying\n    this.context.fillStyle = this.on ? 'red' : 'green'\n    this.context.fillRect(this.x, this.y, 40, 40)\n    this.context.fillStyle = this.on ? 'black' : 'white'\n    this.context.fillText(this.on ? 'STOP' : 'PLAY', this.x+1, this.y+25, 80);\n  }\n  handleClick(){\n    this.state.togglePlay()\n    this.on = this.state.isPlaying\n    this.render()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/PlayBtn.js","export default class SequenceList {\n  constructor(state, ctx, x, y, handleClick){\n    this.context = ctx\n    this.state = state\n    this.pageOne = x/40\n    this.x = x\n    this.y = y\n    this.value = [0, 0, 0, 0]\n    this.callBack = handleClick\n  }\n  handleClick(x, y){\n    const buttonIdx = x - this.pageOne\n    this.value[buttonIdx] = (this.value[buttonIdx] + 1) % 4;\n    this.state.trigger({ type: 'set_sequence', sequence: this.value })\n    this.render()\n  }\n  render(){\n    this.context.clearRect(this.x, this.y, 40, 160)\n    this.context.fillStyle = 'black'\n    for(let i = 0; i < 4; i++){\n      const offset = 40 * i\n      const name = `${this.value[i]+1}`\n      this.context.fillRect(this.x+offset, this.y, 40, 40)\n      this.context.clearRect(this.x+offset+1, this.y, 39-(i === 3 ? 1 : 0), 39)\n      if (this.state.sequenceIndex === i) {\n        this.context.beginPath();\n        this.context.arc(this.x+(40*i)+6, this.y+6, 4, 0, 2 * Math.PI, false);\n        this.context.fillStyle = 'blue'\n        this.context.fill();\n      }\n      this.context.fillStyle = 'black'\n      this.context.fillText(name, this.x+offset+17, this.y+25, 80);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/SequenceList.js","export default class PlayBtn {\n  constructor(state, ctx, x, y){\n    this.context = ctx\n    this.state = state\n    this.x = x\n    this.y = y\n  }\n  render(){\n    const tempoText = `${this.state.tempo}/bpms`\n    this.context.fillStyle = 'black'\n    this.context.clearRect(this.x, this.y, 65, 40)\n    this.context.fillText('+', this.x+25, this.y+10, 80);\n    this.context.fillText('-', this.x+26, this.y+40, 80);\n    this.context.fillText(tempoText, this.x, this.y+25, 80);\n  }\n  handleClick(x, y, innerX, innerY){\n    const section = Math.floor(innerY/20)\n    this.state.tempo = section ? this.state.tempo-1 : this.state.tempo+1\n    this.render()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Tempo.js","export default class Word {\n  constructor(word, ctx, x, y, handleClick){\n    this.context = ctx\n    this.word = word\n    this.x = x\n    this.y = y\n    this.handleClick = handleClick || function(){}\n  }\n  render(){\n    this.context.clearRect(this.x, this.y, 40, 40)\n    this.context.fillStyle = 'green'\n    this.context.fillText(this.word, this.x+3, this.y+25, 80);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Word.js","import { bassControlFunction } from './synth'\nimport { leadControlFunction } from './leadSynth'\nimport { fmControlFunction } from './fm'\nimport { kickControlFunction } from './kick'\nimport { hatControlFunction } from './hat'\nimport { snareControlFunction } from './snare'\n\nconst map = {\n  'bass': bassControlFunction,\n  'lead': leadControlFunction,\n  'fm': fmControlFunction,\n  'kick': kickControlFunction,\n  'hat': hatControlFunction,\n  'snare': snareControlFunction\n}\n\nexport default map\n\n\n\n// WEBPACK FOOTER //\n// ./src/instruments/instrumentControlFunctions.js","import State from './state'\nimport PlayBtn from './ui/PlayBtn'\nimport BeatMarker from './ui/BeatMarker'\nimport Word from './ui/Word'\nimport Options from './ui/Options'\nimport PageButton from './ui/PageButton'\nimport Tempo from './ui/Tempo'\nimport Button from './ui/Button'\nimport InstrumentWindow from './ui/InstrumentWindow'\nimport SequenceList from './ui/SequenceList'\n\nconst canvas = document.getElementById('synth');\nconst ctx = canvas.getContext('2d');\nctx.font = '14px sans-serif'\nconst audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n\nconst state = new State(audioCtx)\n\n/* Play button */\nconst playBtn = state.push(new PlayBtn(ctx, state, 0, 0))\nstate.blocks['0/0'] = playBtn\n\n\n/* Page controls */\nconst pageButton = state.push(new PageButton(state, ctx, 2*40, 0))\nstate.blocks['2/0'] = pageButton\nstate.blocks['3/0'] = pageButton\nstate.blocks['4/0'] = pageButton\nstate.blocks['5/0'] = pageButton\n\nconst sequenceControl = state.push(new SequenceList(state, ctx, 2*40, 40))\nstate.blocks['2/1'] = sequenceControl\nstate.blocks['3/1'] = sequenceControl\nstate.blocks['4/1'] = sequenceControl\nstate.blocks['5/1'] = sequenceControl\n\nstate.blocks['7/0'] = state.push(new Word('Copy', ctx, 7*40, 0, () => state.trigger({ type: 'copy_page'})))\nstate.blocks['8/0'] = state.push(new Word('Paste', ctx, 8*40, 0, () => state.trigger({ type: 'paste_page'})))\n/* Tempo */\nconst tempo = state.push(new Tempo(state, ctx, 11*40, 0))\nstate.blocks['11/0'] = tempo\nstate.blocks['12/0'] = tempo\n\nconst toggleSwing = () => state.trigger({ type: 'toggle_swing' })\nconst swingToggle = state.push(new Options({ options: ['straight', 'swing'], cb: toggleSwing, ctx, x: 14*40, y: 0 }))\nstate.blocks['14/0'] = swingToggle\nstate.blocks['15/0'] = swingToggle\n\nconst instrumentWindow = state.push(new InstrumentWindow(state, ctx, 4*40, 3*40))\nfor(let i = 4; i < 20; i++){\n  for(let k = 3; k < 16; k++){\n    state.blocks[`${i}/${k}`] = instrumentWindow\n  }\n}\n\nconst instruments = ['fm', 'bass','lead', 'kick', 'snare', 'hat']\nlet startX = 4*40\n\nfor(let i = 0; i < instruments.length; i++){\n  let btn = new Button(instruments[i], ctx, startX, 80, (on) => {\n    instrumentWindow.setInstrument(instruments[i])\n  })\n  btn.isToggled = () => instrumentWindow.instrument === instruments[i]\n  state.push(btn)\n  for(let k = 0; k <= Math.floor(btn.width/40); k++){\n    state.blocks[`${Math.ceil(startX/40) + k}/2`] = btn\n  }\n  startX = startX + btn.width\n}\n\ncanvas.onclick = function (e) {\n  let totalOffsetX = 0;\n  let totalOffsetY = 0;\n  let canvasX = 0;\n  let canvasY = 0;\n  let currentElement = this;\n  do {\n    totalOffsetX += currentElement.offsetLeft - currentElement.scrollLeft\n    totalOffsetY += currentElement.offsetTop - currentElement.scrollTop\n  } while(currentElement = currentElement.offsetParent)\n  canvasX = e.pageX - totalOffsetX - window.scrollX;\n  canvasY = e.pageY - totalOffsetY - window.scrollY;\n\n  let x = Math.floor(canvasX/40)\n  let y = Math.floor(canvasY/40)\n  let innerX = canvasX - (x * 40)\n  let innerY = canvasY - (y * 40)\n  const key = `${x}/${y}`\n  const module = state.blocks[key]\n  if(module){\n    state.blocks[key].handleClick(x, y, innerX, innerY)\n  }\n}\n\nconst pageKeys = ['Digit1', 'Digit2', 'Digit3', 'Digit4']\n\nwindow.onkeydown = function(e){\n  if(e.code){\n    if(e.code === 'Space'){\n      state.togglePlay()\n      playBtn.render()\n    } else if(pageKeys.indexOf(e.code) !== -1){\n      const page = parseInt(e.code.split('Digit')[1]) - 1\n      state.trigger({ type: 'set_page', page })\n    } else if(e.code === 'BracketLeft' || e.code === 'BracketRight'){\n      let instrumentIdx = instruments.indexOf(instrumentWindow.instrument)\n      if(e.code === 'BracketLeft' && instrumentIdx > 0) instrumentIdx -= 1\n      if(e.code === 'BracketRight' && instrumentIdx < instruments.length-1) instrumentIdx += 1\n      instrumentWindow.setInstrument(instruments[instrumentIdx])\n    } else if(e.code === 'KeyC'){\n      state.trigger({ type: 'copy_page'})\n    } else if(e.code === 'KeyV'){\n      state.trigger({ type: 'paste_page'})\n    }\n  }\n}\n\nstate.drawScreen()\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","export default class Blinker {\n  constructor(i, state, ctx, x, y){\n    this.context = ctx\n    state.blinkers[i] = this\n    this.idx = i\n    this.on = false\n    this.x = x\n    this.y = y\n  }\n  render(){\n    if(this.on || this.idx % 4 === 0){\n      this.drawCircle()\n    } else {\n      this.context.clearRect(this.x-1, this.y-1, 39, 39)\n    }\n  }\n  drawCircle(){\n    this.context.beginPath();\n    this.context.arc(this.x+20, this.y+20, 8, 0, 2 * Math.PI, false);\n    this.context.fillStyle = this.idx % 4 ? 'red' : 'blue';\n    this.context.fill();\n    this.context.lineWidth = 1;\n    this.context.strokeStyle = '#003300';\n    this.context.stroke();\n  }\n  handleClick(){}\n  toggle(value){\n    this.on = value !== undefined ? value : !this.on\n    this.render()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Blinker.js","export default class ValueInput {\n  constructor({ ctx, x, y, initialValue, maxValue, cb }){\n    this.context = ctx\n    this.value = initialValue\n    this.maxValue = maxValue\n    this.x = x\n    this.y = y\n    this.callback = cb\n  }\n  render(){\n    this.context.fillStyle = 'black'\n    this.context.fillRect(this.x, this.y, 40, 40)\n    this.context.clearRect(this.x+1, this.y+1, 38, 38)\n    this.context.fillText('+', this.x+20, this.y+13, 40)\n    this.context.fillText('-', this.x+21, this.y+37, 40)\n    this.context.fillText(this.value, this.x+5, this.y+25, 40)\n  }\n  handleClick(x, y, innerX, innerY){\n    const section = Math.floor(innerY/20)\n    this.value = Math.abs((section ? this.value-1 : this.value+1) % this.maxValue)\n    this.callback(this.value)\n    this.render()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ValueInput.js","export default class Note {\n  constructor(idx, parent, context, x, y){\n    this.notes = ['c','c#','d','d#','e','f','f#','g','g#','a','a#','b'],\n    this.parent = parent\n    this.context = context\n    this.idx = idx\n    this.x = x\n    this.y = y\n  }\n  render(){\n    this.context.fillStyle = 'black'\n    this.context.fillRect(this.x, this.y, 40, 40)\n    this.context.clearRect(this.x+1, this.y+1, 38, 38)\n    const page = this.parent.getPage()\n    const noteIndex = page[this.idx].note\n    this.context.fillText(this.notes[noteIndex], this.x+15, this.y+25, 15);\n  }\n  handleClick(){\n    const page = this.parent.getPage()\n    page[this.idx].note = page[this.idx].note === 11 ? 0 : page[this.idx].note+1\n    this.render()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/note.js","import { COLOR } from '../constants'\n\nexport class BinSwitch {\n  constructor(idx, state, ctx){\n    this.idx = idx\n    this.state = state\n    this.context = ctx\n    this.x = null\n    this.y = null\n    this.colors = ['black', 'red']\n  }\n  render(){\n    const page = this.state.getPage()\n    this.context.fillStyle = this.colors[page[this.idx].step]\n    this.context.fillRect(this.x, this.y, 39, 39)\n    this.context.fillStyle = COLOR\n  }\n  setPos(x, y){\n    this.x = x\n    this.y = y\n  }\n  handleClick(){\n    const page = this.state.getPage()\n    this.value = (this.value+1) % 2\n    page[this.idx].step = this.value\n    this.context.clearRect(this.x, this.y, 39, 39)\n    this.context.fillStyle = this.colors[page[this.idx].step]\n    this.context.fillRect(this.x, this.y, 39, 39)\n    this.context.fillStyle = COLOR\n  }\n}\n\nexport class OctaveSwitch {\n  constructor(idx, state, ctx, x, y){\n    this.idx = idx\n    this.state = state\n    this.context = ctx\n    this.x = x\n    this.y = y\n    this.colors = ['black', 'red', 'blue']\n  }\n  render(){\n    const page = this.state.getPage()\n    this.context.fillStyle = this.colors[page[this.idx].step]\n    this.context.fillRect(this.x, this.y, 39, 39)\n    this.context.fillStyle = page[this.idx].hold ? 'green' : 'yellow'\n    this.context.fillRect(this.x, this.y, 10, 10)\n    this.context.fillStyle = COLOR\n  }\n  handleClick(x, y, innerX, innerY){\n    const isHold = innerX <= 10 && innerY <= 10\n    const page = this.state.getPage()\n    if(isHold){\n      page[this.idx].hold = !page[this.idx].hold\n    } else {\n      this.value = (page[this.idx].step+1) % 3\n      page[this.idx].step = this.value\n    }\n    this.context.clearRect(this.x, this.y, 39, 39)\n    this.render()\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/switch.js"],"sourceRoot":""}